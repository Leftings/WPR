<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPR-Backend: WPR.Email.Reminders Class Referentie</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WPR-Backend
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Zoeken" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gegenereerd door Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_w_p_r_1_1_email_1_1_reminders.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Laden...</div>
<div class="SRStatus" id="Searching">Zoeken...</div>
<div class="SRStatus" id="NoMatches">Niets gevonden</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Members</a> &#124;
<a href="#pro-methods">Protected Members</a> &#124;
<a href="#pri-methods">Private Members</a> &#124;
<a href="#pri-attribs">Private Attributen</a>  </div>
  <div class="headertitle"><div class="title">WPR.Email.Reminders Class Referentie</div></div>
</div><!--header-->
<div class="contents">

<p>De klasse <a class="el" href="class_w_p_r_1_1_email_1_1_reminders.html" title="De klasse Reminders draaid op de achtergrond om elke 24 uur herrinering mails van contracten te sture...">Reminders</a> draaid op de achtergrond om elke 24 uur herrinering mails van contracten te sturen naar de benodigde gebruikers.  
 <a href="#details">Meer...</a></p>
<div class="dynheader">
Klasse diagram voor WPR.Email.Reminders</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_w_p_r_1_1_email_1_1_reminders__inherit__graph.svg" width="198" height="368"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Collaboratie diagram voor WPR.Email.Reminders:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_w_p_r_1_1_email_1_1_reminders__coll__graph.svg" width="328" height="363"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Members</h2></td></tr>
<tr class="memitem:a31a0fa92259b7db6b6b7e0517ed63c9a" id="r_a31a0fa92259b7db6b6b7e0517ed63c9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31a0fa92259b7db6b6b7e0517ed63c9a">Reminders</a> (IServiceProvider serviceProvider, <a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a> connector)</td></tr>
<tr class="memdesc:a31a0fa92259b7db6b6b7e0517ed63c9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor die de benodigde classes initialiseerd.  <br /></td></tr>
<tr class="separator:a31a0fa92259b7db6b6b7e0517ed63c9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7444d93d984ea9038666a160d3f2c1cd" id="r_a7444d93d984ea9038666a160d3f2c1cd"><td class="memItemLeft" align="right" valign="top">virtual async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7444d93d984ea9038666a160d3f2c1cd">ReminderContract24Hours</a> ()</td></tr>
<tr class="memdesc:a7444d93d984ea9038666a160d3f2c1cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alle gegevens worden opgehaald en verzameld om verstuurd te worden.  <br /></td></tr>
<tr class="separator:a7444d93d984ea9038666a160d3f2c1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Members</h2></td></tr>
<tr class="memitem:ad80d4a26ca16bf220b8b188082e6fca3" id="r_ad80d4a26ca16bf220b8b188082e6fca3"><td class="memItemLeft" align="right" valign="top">override async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad80d4a26ca16bf220b8b188082e6fca3">ExecuteAsync</a> (CancellationToken stoppingToken)</td></tr>
<tr class="memdesc:ad80d4a26ca16bf220b8b188082e6fca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">ExecuteAsync zorgt ervoor dat er de herinneringsmails elke x tijd verstuurd worden. Voor de realiteit is het per 24 uur. Voor het presenteren is het lke 10 seconden.  <br /></td></tr>
<tr class="separator:ad80d4a26ca16bf220b8b188082e6fca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Members</h2></td></tr>
<tr class="memitem:a1d75902f11e2e726605f7ffe7439944e" id="r_a1d75902f11e2e726605f7ffe7439944e"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d75902f11e2e726605f7ffe7439944e">CreateReminderContract</a> (Dictionary&lt; string, object &gt; <a class="el" href="class_w_p_r_1_1_email_1_1_customer.html">Customer</a>, Dictionary&lt; string, object &gt; <a class="el" href="class_w_p_r_1_1_email_1_1_contract.html">Contract</a>, Dictionary&lt; string, object &gt; <a class="el" href="class_w_p_r_1_1_email_1_1_vehicle.html">Vehicle</a>)</td></tr>
<tr class="memdesc:a1d75902f11e2e726605f7ffe7439944e"><td class="mdescLeft">&#160;</td><td class="mdescRight">CreateReminderContract creeÃ«rt een standaard template voor het laten herinneren van gebruikers dat hun zij hun voertuig binnen 24 uur kunnen ophalen.  <br /></td></tr>
<tr class="separator:a1d75902f11e2e726605f7ffe7439944e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42469c6c38c948b8fd2ae5960f5a5dd0" id="r_a42469c6c38c948b8fd2ae5960f5a5dd0"><td class="memItemLeft" align="right" valign="top">async Task&lt; Dictionary&lt; string, object &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42469c6c38c948b8fd2ae5960f5a5dd0">GetCustomerInfo</a> (int id, IServiceScope scope)</td></tr>
<tr class="memdesc:a42469c6c38c948b8fd2ae5960f5a5dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alle gegevens van de klant worden verzameld.  <br /></td></tr>
<tr class="separator:a42469c6c38c948b8fd2ae5960f5a5dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e395400175836072d81ac325fd06141" id="r_a2e395400175836072d81ac325fd06141"><td class="memItemLeft" align="right" valign="top">async Task&lt; Dictionary&lt; string, object &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e395400175836072d81ac325fd06141">GetContractInfo</a> (int id, IServiceScope scope)</td></tr>
<tr class="memdesc:a2e395400175836072d81ac325fd06141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alle gegevens van het contract worden verzameld.  <br /></td></tr>
<tr class="separator:a2e395400175836072d81ac325fd06141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67dff571812b76e4250e73684d8cc454" id="r_a67dff571812b76e4250e73684d8cc454"><td class="memItemLeft" align="right" valign="top">async Task&lt; Dictionary&lt; string, object &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67dff571812b76e4250e73684d8cc454">GetVehicleInfo</a> (int id, IServiceScope scope)</td></tr>
<tr class="memdesc:a67dff571812b76e4250e73684d8cc454"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alle gegegevens van het voertuig worden verzameld.  <br /></td></tr>
<tr class="separator:a67dff571812b76e4250e73684d8cc454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b68b714327d1e6ad8adae0698897f6" id="r_aa5b68b714327d1e6ad8adae0698897f6"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5b68b714327d1e6ad8adae0698897f6">SendEmail</a> (string body, string subject, string toEmail, object orderId, IServiceScope scope)</td></tr>
<tr class="memdesc:aa5b68b714327d1e6ad8adae0698897f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">SendEmail zorgt voor de voorbereidingen van het maken van de email. Terwijl de email klaar wordt gemaakt om te verzenden wordt in de database geregistreerd dat er voor het huidige contract een herinnerings maal verzonden is.  <br /></td></tr>
<tr class="separator:aa5b68b714327d1e6ad8adae0698897f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributen</h2></td></tr>
<tr class="memitem:a09689a320901679aa8ed84c220fed493" id="r_a09689a320901679aa8ed84c220fed493"><td class="memItemLeft" align="right" valign="top">readonly IServiceProvider&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09689a320901679aa8ed84c220fed493">_serviceProvider</a></td></tr>
<tr class="separator:a09689a320901679aa8ed84c220fed493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ebeeb8f8653fcbad7c2fd1845398d0" id="r_a48ebeeb8f8653fcbad7c2fd1845398d0"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48ebeeb8f8653fcbad7c2fd1845398d0">_connector</a></td></tr>
<tr class="separator:a48ebeeb8f8653fcbad7c2fd1845398d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Gedetailleerde Beschrijving</h2>
<div class="textblock"><p>De klasse <a class="el" href="class_w_p_r_1_1_email_1_1_reminders.html" title="De klasse Reminders draaid op de achtergrond om elke 24 uur herrinering mails van contracten te sture...">Reminders</a> draaid op de achtergrond om elke 24 uur herrinering mails van contracten te sturen naar de benodigde gebruikers. </p>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00017">17</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentatie</h2>
<a id="a31a0fa92259b7db6b6b7e0517ed63c9a" name="a31a0fa92259b7db6b6b7e0517ed63c9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a0fa92259b7db6b6b7e0517ed63c9a">&#9670;&#160;</a></span>Reminders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WPR.Email.Reminders.Reminders </td>
          <td>(</td>
          <td class="paramtype">IServiceProvider</td>          <td class="paramname"><span class="paramname"><em>serviceProvider</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a></td>          <td class="paramname"><span class="paramname"><em>connector</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor die de benodigde classes initialiseerd. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serviceProvider</td><td></td></tr>
    <tr><td class="paramname">connector</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Excepties</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00028">28</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>    {</div>
<div class="line"><span class="lineno">   30</span>        _serviceProvider = serviceProvider ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(serviceProvider));</div>
<div class="line"><span class="lineno">   31</span>        _connector = connector ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(connector));</div>
<div class="line"><span class="lineno">   32</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="_reminders_8cs_source.html#l00020">_connector</a> en <a class="el" href="_reminders_8cs_source.html#l00019">_serviceProvider</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentatie van functie members</h2>
<a id="a1d75902f11e2e726605f7ffe7439944e" name="a1d75902f11e2e726605f7ffe7439944e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d75902f11e2e726605f7ffe7439944e">&#9670;&#160;</a></span>CreateReminderContract()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string WPR.Email.Reminders.CreateReminderContract </td>
          <td>(</td>
          <td class="paramtype">Dictionary&lt; string, object &gt;</td>          <td class="paramname"><span class="paramname"><em>Customer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Dictionary&lt; string, object &gt;</td>          <td class="paramname"><span class="paramname"><em>Contract</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Dictionary&lt; string, object &gt;</td>          <td class="paramname"><span class="paramname"><em>Vehicle</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CreateReminderContract creeÃ«rt een standaard template voor het laten herinneren van gebruikers dat hun zij hun voertuig binnen 24 uur kunnen ophalen. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="class_w_p_r_1_1_email_1_1_customer.html" title="In de Customer klasse worden alle gegevens van een specifieke klant verzameld voor het aanmaken van e...">Customer</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="class_w_p_r_1_1_email_1_1_contract.html" title="In de Contract klasse worden alle gegevens van een specifieke klant verzameld voor het aanmaken van e...">Contract</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="class_w_p_r_1_1_email_1_1_vehicle.html" title="In de Vehicle klasse worden alle gegevens van een specifieke klant verzameld voor het aanmaken van ee...">Vehicle</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00041">41</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>        <span class="keywordflow">return</span> @$<span class="stringliteral">&quot;&lt;h1&gt;Herinnering voor voertuig &lt;/h1&gt;Beste {Customer[&quot;</span>Email<span class="stringliteral">&quot;]},</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">        &lt;p&gt;Uw contract met referencie nummer {Contract[&quot;</span>OrderId<span class="stringliteral">&quot;]} gaat vanaf morgen in.&lt;/p&gt;</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad80d4a26ca16bf220b8b188082e6fca3" name="ad80d4a26ca16bf220b8b188082e6fca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad80d4a26ca16bf220b8b188082e6fca3">&#9670;&#160;</a></span>ExecuteAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override async Task WPR.Email.Reminders.ExecuteAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>stoppingToken</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ExecuteAsync zorgt ervoor dat er de herinneringsmails elke x tijd verstuurd worden. Voor de realiteit is het per 24 uur. Voor het presenteren is het lke 10 seconden. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stoppingToken</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00201">201</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  211</span>    {</div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">while</span> (!stoppingToken.IsCancellationRequested)</div>
<div class="line"><span class="lineno">  213</span>        {</div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  215</span>            {</div>
<div class="line"><span class="lineno">  216</span>                await ReminderContract24Hours();</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e395400175836072d81ac325fd06141" name="a2e395400175836072d81ac325fd06141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e395400175836072d81ac325fd06141">&#9670;&#160;</a></span>GetContractInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; Dictionary&lt; string, object &gt; &gt; WPR.Email.Reminders.GetContractInfo </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IServiceScope</td>          <td class="paramname"><span class="paramname"><em>scope</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alle gegevens van het contract worden verzameld. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
    <tr><td class="paramname">scope</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00067">67</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>

</div>
</div>
<a id="a42469c6c38c948b8fd2ae5960f5a5dd0" name="a42469c6c38c948b8fd2ae5960f5a5dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42469c6c38c948b8fd2ae5960f5a5dd0">&#9670;&#160;</a></span>GetCustomerInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; Dictionary&lt; string, object &gt; &gt; WPR.Email.Reminders.GetCustomerInfo </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IServiceScope</td>          <td class="paramname"><span class="paramname"><em>scope</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alle gegevens van de klant worden verzameld. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
    <tr><td class="paramname">scope</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00052">52</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>

</div>
</div>
<a id="a67dff571812b76e4250e73684d8cc454" name="a67dff571812b76e4250e73684d8cc454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67dff571812b76e4250e73684d8cc454">&#9670;&#160;</a></span>GetVehicleInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; Dictionary&lt; string, object &gt; &gt; WPR.Email.Reminders.GetVehicleInfo </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IServiceScope</td>          <td class="paramname"><span class="paramname"><em>scope</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alle gegegevens van het voertuig worden verzameld. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
    <tr><td class="paramname">scope</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00082">82</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>

</div>
</div>
<a id="a7444d93d984ea9038666a160d3f2c1cd" name="a7444d93d984ea9038666a160d3f2c1cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7444d93d984ea9038666a160d3f2c1cd">&#9670;&#160;</a></span>ReminderContract24Hours()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async Task&lt; bool &gt; WPR.Email.Reminders.ReminderContract24Hours </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alle gegevens worden opgehaald en verzameld om verstuurd te worden. </p>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00148">148</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>    {</div>
<div class="line"><span class="lineno">  159</span>        <span class="keyword">using</span> (var scope = _serviceProvider.CreateScope()) <span class="comment">// Er wordt een scope opgezet, zodat alle gegevens bereikbaar zijn</span></div>
<div class="line"><span class="lineno">  160</span>        {</div>
<div class="line"><span class="lineno">  161</span>            var customer = scope.ServiceProvider.GetRequiredService&lt;ICustomerDetails&gt;();</div>
<div class="line"><span class="lineno">  162</span>            var contract = scope.ServiceProvider.GetRequiredService&lt;IContractDetails&gt;();</div>
<div class="line"><span class="lineno">  163</span>            var vehicle = scope.ServiceProvider.GetRequiredService&lt;IVehicleDetails&gt;();</div>
<div class="line"><span class="lineno">  164</span>            var contracts = scope.ServiceProvider.GetRequiredService&lt;IContractRepository&gt;();</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span> || contract == <span class="keyword">null</span> || vehicle == <span class="keyword">null</span> || contracts == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  167</span>            {</div>
<div class="line"><span class="lineno">  168</span>                Console.WriteLine(<span class="stringliteral">&quot;One or more required services are not available.&quot;</span>);</div>
<div class="line"><span class="lineno">  169</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>; </div>
<div class="line"><span class="lineno">  170</span>            }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>            IList&lt;int&gt; ids = await contracts.GetContractsSendEmailAsync();</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>            <span class="keywordflow">if</span> (ids == <span class="keyword">null</span> || ids.Count == 0)</div>
<div class="line"><span class="lineno">  175</span>            {</div>
<div class="line"><span class="lineno">  176</span>                Console.WriteLine(<span class="stringliteral">&quot;No contracts are waiting for an email&quot;</span>);</div>
<div class="line"><span class="lineno">  177</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  178</span>            }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">foreach</span> (<span class="keywordtype">int</span> orderId <span class="keywordflow">in</span> ids)</div>
<div class="line"><span class="lineno">  181</span>            {</div>
<div class="line"><span class="lineno">  182</span>                <span class="comment">// Alle gegevens worden verzameld in dictionaries</span></div>
<div class="line"><span class="lineno">  183</span>                Dictionary&lt;string, object&gt; contractDic = <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><span class="lineno">  184</span>                Dictionary&lt;string, object&gt; customerDic = <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><span class="lineno">  185</span>                Dictionary&lt;string, object&gt; vehicleDic = <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>                <span class="comment">// Alle gegevens worden in de dictionaries gezet</span></div>
<div class="line"><span class="lineno">  188</span>                contractDic = await GetContractInfo(orderId, scope);</div>
<div class="line"><span class="lineno">  189</span>                customerDic = await GetCustomerInfo(Convert.ToInt32(contractDic[<span class="stringliteral">&quot;Customer&quot;</span>]), scope);</div>
<div class="line"><span class="lineno">  190</span>                vehicleDic = await GetVehicleInfo(Convert.ToInt32(contractDic[<span class="stringliteral">&quot;FrameNrVehicle&quot;</span>]), scope);</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>                <span class="comment">// Email wordt aangemaakt</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5b68b714327d1e6ad8adae0698897f6" name="aa5b68b714327d1e6ad8adae0698897f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5b68b714327d1e6ad8adae0698897f6">&#9670;&#160;</a></span>SendEmail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task WPR.Email.Reminders.SendEmail </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>body</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>subject</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>toEmail</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">object</td>          <td class="paramname"><span class="paramname"><em>orderId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IServiceScope</td>          <td class="paramname"><span class="paramname"><em>scope</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SendEmail zorgt voor de voorbereidingen van het maken van de email. Terwijl de email klaar wordt gemaakt om te verzenden wordt in de database geregistreerd dat er voor het huidige contract een herinnerings maal verzonden is. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">body</td><td></td></tr>
    <tr><td class="paramname">subject</td><td></td></tr>
    <tr><td class="paramname">toEmail</td><td></td></tr>
    <tr><td class="paramname">orderId</td><td></td></tr>
    <tr><td class="paramname">scope</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>
<dl class="exception"><dt>Excepties</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidOperationException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00102">102</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>    {</div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  114</span>        {</div>
<div class="line"><span class="lineno">  115</span>            var emailService = scope.ServiceProvider.GetService&lt;IEmailService&gt;(); <span class="comment">// Emailservices wordt beschikbaargesteld</span></div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>            <span class="keywordflow">if</span> (emailService == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  118</span>            {</div>
<div class="line"><span class="lineno">  119</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;IEmailService not found in service provider.&quot;</span>);</div>
<div class="line"><span class="lineno">  120</span>            }</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordtype">string</span> query = $<span class="stringliteral">&quot;UPDATE Contract SET SendEmail = &#39;Yes&#39; WHERE OrderId = {orderId}&quot;</span>;</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>            <span class="comment">// Er wordt vastgesteld in de database dat er een email verstuurd is</span></div>
<div class="line"><span class="lineno">  125</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  126</span>            <span class="keyword">using</span> (var command = connection.CreateCommand())</div>
<div class="line"><span class="lineno">  127</span>            {</div>
<div class="line"><span class="lineno">  128</span>                <span class="keywordflow">if</span> (command == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  129</span>                {</div>
<div class="line"><span class="lineno">  130</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Failed to create a database command.&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>                }</div>
<div class="line"><span class="lineno">  132</span>                </div>
<div class="line"><span class="lineno">  133</span>                command.CommandText = query;</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>                <span class="keywordflow">if</span> (command.ExecuteNonQuery() &gt; 0)</div>
<div class="line"><span class="lineno">  136</span>                {</div>
<div class="line"><span class="lineno">  137</span>                    await emailService.Send(toEmail, subject, body); <span class="comment">// Email aanvraag wordt verstuurd</span></div>
<div class="line"><span class="lineno">  138</span>                }</div>
<div class="line"><span class="lineno">  139</span>            }</div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  142</span>        {</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="_reminders_8cs_source.html#l00020">_connector</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentatie van data velden</h2>
<a id="a48ebeeb8f8653fcbad7c2fd1845398d0" name="a48ebeeb8f8653fcbad7c2fd1845398d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48ebeeb8f8653fcbad7c2fd1845398d0">&#9670;&#160;</a></span>_connector</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a> WPR.Email.Reminders._connector</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00020">20</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="_reminders_8cs_source.html#l00028">Reminders()</a> en <a class="el" href="_reminders_8cs_source.html#l00102">SendEmail()</a>.</p>

</div>
</div>
<a id="a09689a320901679aa8ed84c220fed493" name="a09689a320901679aa8ed84c220fed493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09689a320901679aa8ed84c220fed493">&#9670;&#160;</a></span>_serviceProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IServiceProvider WPR.Email.Reminders._serviceProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">De definitie bevindt zich op regel <a class="el" href="_reminders_8cs_source.html#l00019">19</a> in het bestand <a class="el" href="_reminders_8cs_source.html">Reminders.cs</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="_reminders_8cs_source.html#l00028">Reminders()</a>.</p>

</div>
</div>
<hr/>De documentatie voor deze klasse is gegenereerd op basis van het volgende bestand:<ul>
<li>D:/codes/WPR8/WPR/backend/src/Emails/<a class="el" href="_reminders_8cs_source.html">Reminders.cs</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_w_p_r.html">WPR</a></li><li class="navelem"><a class="el" href="namespace_w_p_r_1_1_email.html">Email</a></li><li class="navelem"><a class="el" href="class_w_p_r_1_1_email_1_1_reminders.html">Reminders</a></li>
    <li class="footer">Gegenereerd door <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0 </li>
  </ul>
</div>
</body>
</html>
