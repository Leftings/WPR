<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Car And All WPR: WPR.Repository.UserRepository Class Referentie</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Car And All WPR
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Zoeken" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gegenereerd door Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_w_p_r_1_1_repository_1_1_user_repository.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Laden...</div>
<div class="SRStatus" id="Searching">Zoeken...</div>
<div class="SRStatus" id="NoMatches">Niets gevonden</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structuren</a> &#124;
<a href="#pub-methods">Public Members</a> &#124;
<a href="#pri-methods">Private Members</a> &#124;
<a href="#pri-attribs">Private Attributen</a>  </div>
  <div class="headertitle"><div class="title">WPR.Repository.UserRepository Class Referentie</div></div>
</div><!--header-->
<div class="contents">

<p>De <a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository.html" title="De UserRepository class geeft de methodes voor de interactie met de database voor gebruiker gerelatee...">UserRepository</a> class geeft de methodes voor de interactie met de database voor gebruiker gerelateerde operaties. Het implementeert de <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html" title="Interface defining methods voor user gerelateerde database operaties, validatie, user management,...">IUserRepository</a> interface.  
 <a href="#details">Meer...</a></p>
<div class="dynheader">
Klasse diagram voor WPR.Repository.UserRepository</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository__inherit__graph.png" border="0" usemap="#a_w_p_r_8_repository_8_user_repository_inherit__map" alt="Inheritance graph"/></div>
<map name="a_w_p_r_8_repository_8_user_repository_inherit__map" id="a_w_p_r_8_repository_8_user_repository_inherit__map">
<area shape="rect" title="De UserRepository class geeft de methodes voor de interactie met de database voor gebruiker gerelatee..." alt="" coords="5,656,402,1664"/>
<area shape="rect" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html" title="Interface defining methods voor user gerelateerde database operaties, validatie, user management,..." alt="" coords="74,5,334,608"/>
<area shape="poly" title=" " alt="" coords="206,623,206,656,201,656,201,623"/>
</map>
</div>
<div class="dynheader">
Collaboratie diagram voor WPR.Repository.UserRepository:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository__coll__graph.png" border="0" usemap="#a_w_p_r_8_repository_8_user_repository_coll__map" alt="Collaboration graph"/></div>
<map name="a_w_p_r_8_repository_8_user_repository_coll__map" id="a_w_p_r_8_repository_8_user_repository_coll__map">
<area shape="rect" title="De UserRepository class geeft de methodes voor de interactie met de database voor gebruiker gerelatee..." alt="" coords="333,965,730,1915"/>
<area shape="rect" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html" title="Interface defining methods voor user gerelateerde database operaties, validatie, user management,..." alt="" coords="5,299,265,901"/>
<area shape="poly" title=" " alt="" coords="274,890,279,900,335,1019,331,1021,274,902,269,892"/>
<area shape="rect" href="interface_w_p_r_1_1_database_1_1_i_connector.html" title="Connector class om verbinding te maken met de database, maakt gebruik van de connectie strings die zi..." alt="" coords="289,565,534,635"/>
<area shape="poly" title=" " alt="" coords="419,634,464,948,458,949,413,635"/>
<area shape="rect" href="class_w_p_r_1_1_hashing_1_1_hash.html" title="Class Hash zorgt ervoor dat wachtwoorden op een veilige manier worden gehashed doormiddel van het HMA..." alt="" coords="558,536,745,664"/>
<area shape="poly" title=" " alt="" coords="645,664,604,949,599,948,640,664"/>
<area shape="rect" href="class_w_p_r_1_1_cryption_1_1_crypt.html" title="Class Crypt zorgt voor een veilig encryptie en decryptie van strings. De Crptie wordt gedaan door het..." alt="" coords="769,517,957,683"/>
<area shape="poly" title=" " alt="" coords="838,684,759,902,738,955,734,953,754,900,833,682"/>
<area shape="rect" href="class_w_p_r_1_1_data_1_1_env_config.html" title="Leez het .env bestand uit waarin de connectie strings staan naar de database. Deze staan in een apart..." alt="" coords="775,5,952,235"/>
<area shape="poly" title=" " alt="" coords="866,234,866,500,861,500,861,234"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structuren</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository_1_1_customer.html">Customer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository_1_1_vehicle_manager.html">VehicleManager</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Members</h2></td></tr>
<tr class="memitem:a6b46f876251feceb2b51ae6a3dfdfc15" id="r_a6b46f876251feceb2b51ae6a3dfdfc15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b46f876251feceb2b51ae6a3dfdfc15">UserRepository</a> (<a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a> connector, <a class="el" href="class_w_p_r_1_1_hashing_1_1_hash.html">Hash</a> hash, <a class="el" href="class_w_p_r_1_1_cryption_1_1_crypt.html">Crypt</a> crypt)</td></tr>
<tr class="separator:a6b46f876251feceb2b51ae6a3dfdfc15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb512c98ffbaeb97a9b9f2fdc8994549" id="r_adb512c98ffbaeb97a9b9f2fdc8994549"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb512c98ffbaeb97a9b9f2fdc8994549">ValidateUserAsync</a> (string username, string password, string userType)</td></tr>
<tr class="memdesc:adb512c98ffbaeb97a9b9f2fdc8994549"><td class="mdescLeft">&#160;</td><td class="mdescRight">Er wordt door middel van de meegegeven userType een query aangemaakt, om de juiste gegevens uit de juiste tabel op te halen. Vervolgens wordt er in de query het meegegeven emailadress gestopt, om zo het gehaste wachtwoord uit de database te halen Nadat er een gebruiker met wachtwoord uit de query komt, zal dit gehaste wachtwoord vergelek worden met het meegegeven gehaste wachtwoord.  <br /></td></tr>
<tr class="separator:adb512c98ffbaeb97a9b9f2fdc8994549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7903e03bfe7076a6ee7b352636cb854d" id="r_a7903e03bfe7076a6ee7b352636cb854d"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7903e03bfe7076a6ee7b352636cb854d">checkUsageEmailAsync</a> (string email)</td></tr>
<tr class="memdesc:a7903e03bfe7076a6ee7b352636cb854d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Er wordt gekeken of het emailadres al bestaat in de databse.  <br /></td></tr>
<tr class="separator:a7903e03bfe7076a6ee7b352636cb854d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ef5421fcb8544d4aab8ed834325a74" id="r_a42ef5421fcb8544d4aab8ed834325a74"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message, int newUserID)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42ef5421fcb8544d4aab8ed834325a74">addCustomerAsync</a> (Object[] personData)</td></tr>
<tr class="memdesc:a42ef5421fcb8544d4aab8ed834325a74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Een gebruiker (klant) wordt toegevoegd aan de database, doormiddel van alle meegegeven persoondata. Deze persoondata zal vervolgens in de query geïmplementeerd worden en vervolgens worden uitgevoerd.  <br /></td></tr>
<tr class="separator:a42ef5421fcb8544d4aab8ed834325a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a2f860883fcc39ea7fa8a932fde475" id="r_a25a2f860883fcc39ea7fa8a932fde475"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25a2f860883fcc39ea7fa8a932fde475">addPersonalCustomerAsync</a> (Object[] personalData)</td></tr>
<tr class="memdesc:a25a2f860883fcc39ea7fa8a932fde475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Het aangemaakte account wordt gekoppeld aan de particuliere tabel, doormiddel van alle meegegeven persoondata. Deze persoondata zal vervolgens in de query geïmplementeerd worden en vervolgens worden uitgevoerd.  <br /></td></tr>
<tr class="separator:a25a2f860883fcc39ea7fa8a932fde475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281b2d169ce34a240a18b3f106e2f95d" id="r_a281b2d169ce34a240a18b3f106e2f95d"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a281b2d169ce34a240a18b3f106e2f95d">addEmployeeCustomerAsync</a> (Object[] employeeData)</td></tr>
<tr class="memdesc:a281b2d169ce34a240a18b3f106e2f95d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Het aangemaakte account wordt gekoppeld aan de medewerkers tabel, doormiddel van alle meegegeven persoondata. Deze persoondata zal vervolgens in de query geïmplementeerd worden en vervolgens worden uitgevoerd.  <br /></td></tr>
<tr class="separator:a281b2d169ce34a240a18b3f106e2f95d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5055bbf69f618cfea05d82dba1becb" id="r_aea5055bbf69f618cfea05d82dba1becb"><td class="memItemLeft" align="right" valign="top">async Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea5055bbf69f618cfea05d82dba1becb">GetUserIdAsync</a> (string email, string table)</td></tr>
<tr class="separator:aea5055bbf69f618cfea05d82dba1becb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb618d51bcc50e8f72102e11f6bed987" id="r_acb618d51bcc50e8f72102e11f6bed987"><td class="memItemLeft" align="right" valign="top">async Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb618d51bcc50e8f72102e11f6bed987">GetUserNameAsync</a> (string userId)</td></tr>
<tr class="separator:acb618d51bcc50e8f72102e11f6bed987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a5424f00a5cfc023cc147a1e0a59cf" id="r_af9a5424f00a5cfc023cc147a1e0a59cf"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9a5424f00a5cfc023cc147a1e0a59cf">EditUserInfoAsync</a> (List&lt; object[]&gt; data)</td></tr>
<tr class="separator:af9a5424f00a5cfc023cc147a1e0a59cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49c76e9c3e780a07b7036dd2a6d30263" id="r_a49c76e9c3e780a07b7036dd2a6d30263"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49c76e9c3e780a07b7036dd2a6d30263">IsKvkNumberAsync</a> (int kvkNumber)</td></tr>
<tr class="separator:a49c76e9c3e780a07b7036dd2a6d30263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23bd5c36ff2c79f375a1b88727134636" id="r_a23bd5c36ff2c79f375a1b88727134636"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23bd5c36ff2c79f375a1b88727134636">DeleteUserAsync</a> (string userId)</td></tr>
<tr class="separator:a23bd5c36ff2c79f375a1b88727134636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69d7ed5e941ab05fe1eb4ae9bb3ff1f" id="r_ad69d7ed5e941ab05fe1eb4ae9bb3ff1f"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message, string officeType)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad69d7ed5e941ab05fe1eb4ae9bb3ff1f">GetKindEmployeeAsync</a> (string userId)</td></tr>
<tr class="memdesc:ad69d7ed5e941ab05fe1eb4ae9bb3ff1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Er wordt door de query, doormiddel van de user id, vastgesteld tot wat voor soort office de medewerker van Car and All behoort.  <br /></td></tr>
<tr class="separator:ad69d7ed5e941ab05fe1eb4ae9bb3ff1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09794bb8a3181b5be3f2676421dc4b12" id="r_a09794bb8a3181b5be3f2676421dc4b12"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool status, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09794bb8a3181b5be3f2676421dc4b12">AddStaff</a> (Object[] personData)</td></tr>
<tr class="memdesc:a09794bb8a3181b5be3f2676421dc4b12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Er kunnen medewewerkers van Car and All toegevoegd worden aan de database, door middel van hun gegevens. De database voorziet de gegevens van een automatische id.  <br /></td></tr>
<tr class="separator:a09794bb8a3181b5be3f2676421dc4b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9897bc253b72e7422cca16f676d4e53c" id="r_a9897bc253b72e7422cca16f676d4e53c"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9897bc253b72e7422cca16f676d4e53c">IsUserEmployee</a> (int id)</td></tr>
<tr class="memdesc:a9897bc253b72e7422cca16f676d4e53c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Er wordt gekeken door middel van het id of de gebruiker een geldig medewerkers id heeft.  <br /></td></tr>
<tr class="separator:a9897bc253b72e7422cca16f676d4e53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188ce6aab8b95ea246623cc80b520714" id="r_a188ce6aab8b95ea246623cc80b520714"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool Status, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a188ce6aab8b95ea246623cc80b520714">AddPersonalCustomer</a> (SignUpRequest request)</td></tr>
<tr class="separator:a188ce6aab8b95ea246623cc80b520714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a688723c1fb3385274f13ba0e3ba78da8" id="r_a688723c1fb3385274f13ba0e3ba78da8"><td class="memItemLeft" align="right" valign="top">async Task&lt;(int StatusCode, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a688723c1fb3385274f13ba0e3ba78da8">AddCustomer</a> (SignUpRequestCustomer request, SignUpRequestCustomerPrivate privateRequest)</td></tr>
<tr class="memdesc:a688723c1fb3385274f13ba0e3ba78da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">AddCustomer krijgt SignUpRequestCustomer binnen en SignUpRequestCustomerPrivate. Elk account heeft als algemene registratie een email en accounttype.  <br /></td></tr>
<tr class="separator:a688723c1fb3385274f13ba0e3ba78da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9423f68f7d22b18441e746ba0d9ef6d6" id="r_a9423f68f7d22b18441e746ba0d9ef6d6"><td class="memItemLeft" align="right" valign="top">async Task&lt;(int StatusCode, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9423f68f7d22b18441e746ba0d9ef6d6">ChangeVehicleManagerInfo</a> (<a class="el" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html">ChangeVehicleManagerInfo</a> request)</td></tr>
<tr class="separator:a9423f68f7d22b18441e746ba0d9ef6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bcea10de41cf249cee9d4049c25cc45" id="r_a2bcea10de41cf249cee9d4049c25cc45"><td class="memItemLeft" align="right" valign="top">async Task&lt;(int StatusCode, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2bcea10de41cf249cee9d4049c25cc45">ChangeBusinessInfo</a> (<a class="el" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request.html">ChangeBusinessRequest</a> request)</td></tr>
<tr class="separator:a2bcea10de41cf249cee9d4049c25cc45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa69e427aa0d8724ad9fca2fae1f69970" id="r_aa69e427aa0d8724ad9fca2fae1f69970"><td class="memItemLeft" align="right" valign="top">async Task&lt;(int StatusCode, string Domain)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa69e427aa0d8724ad9fca2fae1f69970">GetBusinessDomainByKvK</a> (int KvK)</td></tr>
<tr class="separator:aa69e427aa0d8724ad9fca2fae1f69970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12697e6b3bceb0e47d86f05020dc8470" id="r_a12697e6b3bceb0e47d86f05020dc8470"><td class="memItemLeft" align="right" valign="top">async Task&lt; List&lt; string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12697e6b3bceb0e47d86f05020dc8470">GetAllSubscriptionsAsync</a> ()</td></tr>
<tr class="separator:a12697e6b3bceb0e47d86f05020dc8470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d8e6fb3ae175bfb90fcf19a595b01e" id="r_ac6d8e6fb3ae175bfb90fcf19a595b01e"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_w_p_r_1_1_controllers_1_1customer_1_1_subscription_1_1_subscription_request.html">SubscriptionRequest</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6d8e6fb3ae175bfb90fcf19a595b01e">GetSubscriptionDataAsync</a> (int id)</td></tr>
<tr class="separator:ac6d8e6fb3ae175bfb90fcf19a595b01e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877da96134a584ccc0795c7410e5532c" id="r_a877da96134a584ccc0795c7410e5532c"><td class="memItemLeft" align="right" valign="top">async Task&lt; List&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a877da96134a584ccc0795c7410e5532c">GetSubscriptionIdsAsync</a> ()</td></tr>
<tr class="separator:a877da96134a584ccc0795c7410e5532c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b888ee7712ae0374bc95a7330597e6" id="r_a79b888ee7712ae0374bc95a7330597e6"><td class="memItemLeft" align="right" valign="top">async Task&lt; Dictionary&lt; string, object &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a79b888ee7712ae0374bc95a7330597e6">GetCustomerDetails</a> (int id)</td></tr>
<tr class="separator:a79b888ee7712ae0374bc95a7330597e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac8b0cd38ba8f5bc6b26de77ba3faf8" id="r_a0ac8b0cd38ba8f5bc6b26de77ba3faf8"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository_1_1_vehicle_manager.html">VehicleManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ac8b0cd38ba8f5bc6b26de77ba3faf8">GetVehicleManagerInfoAsync</a> (int id)</td></tr>
<tr class="separator:a0ac8b0cd38ba8f5bc6b26de77ba3faf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39799412586f96c48d820755a9fa1a6b" id="r_a39799412586f96c48d820755a9fa1a6b"><td class="memItemLeft" align="right" valign="top">async Task&lt; List&lt; <a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository_1_1_customer.html">Customer</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a39799412586f96c48d820755a9fa1a6b">GetCustomersByBusinessNumberAsync</a> (string Kvk)</td></tr>
<tr class="separator:a39799412586f96c48d820755a9fa1a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b36404dd3d6de335c9986321ead166" id="r_af7b36404dd3d6de335c9986321ead166"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7b36404dd3d6de335c9986321ead166">UpdateCustomerAsync</a> (int id, string email, string password)</td></tr>
<tr class="separator:af7b36404dd3d6de335c9986321ead166"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Members</h2></td></tr>
<tr class="memitem:af1ae304fd24d3ae358db293b0033e484" id="r_af1ae304fd24d3ae358db293b0033e484"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool goodQuery, string message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1ae304fd24d3ae358db293b0033e484">CreateUserInfoQuery</a> (List&lt; object[]&gt; data)</td></tr>
<tr class="memdesc:af1ae304fd24d3ae358db293b0033e484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Er wordt een query aangemaakt, met daarin de meegeven gegevens die veranderd moeten worden in het account van de gebruiker.  <br /></td></tr>
<tr class="separator:af1ae304fd24d3ae358db293b0033e484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b7a3c517ffe6cb1b85eee60e5b2292" id="r_ae8b7a3c517ffe6cb1b85eee60e5b2292"><td class="memItemLeft" align="right" valign="top">async Task&lt;(bool Status, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8b7a3c517ffe6cb1b85eee60e5b2292">AddCustomerChecks</a> (bool isPrivate, SignUpRequestCustomer? customer, SignUpRequestCustomerPrivate detailed)</td></tr>
<tr class="memdesc:ae8b7a3c517ffe6cb1b85eee60e5b2292"><td class="mdescLeft">&#160;</td><td class="mdescRight">AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks.  <br /></td></tr>
<tr class="separator:ae8b7a3c517ffe6cb1b85eee60e5b2292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe2a09bb575fb8d9510828ef5ad9813" id="r_a4fe2a09bb575fb8d9510828ef5ad9813"><td class="memItemLeft" align="right" valign="top">async Task&lt;(int StatusCode, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fe2a09bb575fb8d9510828ef5ad9813">AddPrivateCustomerDetails</a> (SignUpRequestCustomerPrivate request, int userId, MySqlConnection connections)</td></tr>
<tr class="memdesc:a4fe2a09bb575fb8d9510828ef5ad9813"><td class="mdescLeft">&#160;</td><td class="mdescRight">AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd worden in de Private tabel.  <br /></td></tr>
<tr class="separator:a4fe2a09bb575fb8d9510828ef5ad9813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af67e3842ab505dde8a9b4986eec3d470" id="r_af67e3842ab505dde8a9b4986eec3d470"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af67e3842ab505dde8a9b4986eec3d470">CreateUpdateQuery</a> (string tabel, IList&lt; object[]&gt; data)</td></tr>
<tr class="separator:af67e3842ab505dde8a9b4986eec3d470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adce1c47fd8ee12e83c5b918614e20bbc" id="r_adce1c47fd8ee12e83c5b918614e20bbc"><td class="memItemLeft" align="right" valign="top">async Task&lt;(int StatusCode, string Message)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adce1c47fd8ee12e83c5b918614e20bbc">ChangeBusinessData</a> (<a class="el" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html">ChangeBusinessInfo</a> businessInfo, MySqlConnection connection)</td></tr>
<tr class="separator:adce1c47fd8ee12e83c5b918614e20bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributen</h2></td></tr>
<tr class="memitem:a0d5c086f43d20479ee31bed3ae96a63f" id="r_a0d5c086f43d20479ee31bed3ae96a63f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d5c086f43d20479ee31bed3ae96a63f">_connector</a></td></tr>
<tr class="separator:a0d5c086f43d20479ee31bed3ae96a63f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b11b787b41fa41a34ef2515f5eaa6d3" id="r_a1b11b787b41fa41a34ef2515f5eaa6d3"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_w_p_r_1_1_hashing_1_1_hash.html">Hash</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b11b787b41fa41a34ef2515f5eaa6d3">_hash</a></td></tr>
<tr class="separator:a1b11b787b41fa41a34ef2515f5eaa6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ad4a8f0e0ab9918ee233a207c2b125" id="r_ac8ad4a8f0e0ab9918ee233a207c2b125"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_w_p_r_1_1_cryption_1_1_crypt.html">Crypt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8ad4a8f0e0ab9918ee233a207c2b125">_crypt</a></td></tr>
<tr class="separator:ac8ad4a8f0e0ab9918ee233a207c2b125"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Gedetailleerde Beschrijving</h2>
<div class="textblock"><p>De <a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository.html" title="De UserRepository class geeft de methodes voor de interactie met de database voor gebruiker gerelatee...">UserRepository</a> class geeft de methodes voor de interactie met de database voor gebruiker gerelateerde operaties. Het implementeert de <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html" title="Interface defining methods voor user gerelateerde database operaties, validatie, user management,...">IUserRepository</a> interface. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentatie</h2>
<a id="a6b46f876251feceb2b51ae6a3dfdfc15" name="a6b46f876251feceb2b51ae6a3dfdfc15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b46f876251feceb2b51ae6a3dfdfc15">&#9670;&#160;</a></span>UserRepository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WPR.Repository.UserRepository.UserRepository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a></td>          <td class="paramname"><span class="paramname"><em>connector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_p_r_1_1_hashing_1_1_hash.html">Hash</a></td>          <td class="paramname"><span class="paramname"><em>hash</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_p_r_1_1_cryption_1_1_crypt.html">Crypt</a></td>          <td class="paramname"><span class="paramname"><em>crypt</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   31</span>    {</div>
<div class="line"><span class="lineno">   32</span>        _connector = connector ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(connector));</div>
<div class="line"><span class="lineno">   33</span>        _hash = hash ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(hash));</div>
<div class="line"><span class="lineno">   34</span>        _crypt = crypt ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(crypt));</div>
<div class="line"><span class="lineno">   35</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>, <a class="el" href="#l00028">_crypt</a> en <a class="el" href="#l00027">_hash</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentatie van functie members</h2>
<a id="a688723c1fb3385274f13ba0e3ba78da8" name="a688723c1fb3385274f13ba0e3ba78da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a688723c1fb3385274f13ba0e3ba78da8">&#9670;&#160;</a></span>AddCustomer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(int StatusCode, string Message)&gt; WPR.Repository.UserRepository.AddCustomer </td>
          <td>(</td>
          <td class="paramtype">SignUpRequestCustomer</td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SignUpRequestCustomerPrivate</td>          <td class="paramname"><span class="paramname"><em>privateRequest</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>AddCustomer krijgt SignUpRequestCustomer binnen en SignUpRequestCustomerPrivate. Elk account heeft als algemene registratie een email en accounttype. </p>
<p>Bij een particulier (Private) account geeft de gebruiker alleen een email en een accounttype door. Bij een zakelijk (Business) account geeft de gebruiker een email, accounttype en KvK nummer door (ID's worden ingevuld door de database)</p>
<p>Bij een particulier account wordt nog een tweede query uitgevoerd (zie AddPrivateCustomerDetails). Als deze query mocht falen wordt de gehele transactie gerolledbacked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td></td></tr>
    <tr><td class="paramname">privateRequest</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a103bbaff883cb3af9e3d4c98a2100d5b">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  798</span>    {</div>
<div class="line"><span class="lineno">  799</span>        (<span class="keywordtype">bool</span> Status, <span class="keywordtype">string</span> Message) checks = await AddCustomerChecks(request.IsPrivate, request, privateRequest);</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>        <span class="keywordflow">if</span> (checks.Status)</div>
<div class="line"><span class="lineno">  802</span>        {</div>
<div class="line"><span class="lineno">  803</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  804</span>            {</div>
<div class="line"><span class="lineno">  805</span>                <span class="keywordtype">string</span> query;</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>                <span class="keywordflow">if</span> (request.AccountType.Equals(<span class="stringliteral">&quot;Private&quot;</span>))</div>
<div class="line"><span class="lineno">  808</span>                {</div>
<div class="line"><span class="lineno">  809</span>                    query = <span class="stringliteral">&quot;INSERT INTO Customer (Email, AccountType, Password) VALUES (@E, @A, @P)&quot;</span>;</div>
<div class="line"><span class="lineno">  810</span>                }</div>
<div class="line"><span class="lineno">  811</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  812</span>                {</div>
<div class="line"><span class="lineno">  813</span>                    query = <span class="stringliteral">&quot;INSERT INTO Customer (Email, KvK, AccountType, Password) VALUES (@E, @K, @A, @P)&quot;</span>;</div>
<div class="line"><span class="lineno">  814</span>                }</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>                <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  817</span>                <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  818</span>                <span class="keyword">using</span> (var transaction = connection.BeginTransaction())</div>
<div class="line"><span class="lineno">  819</span>                {</div>
<div class="line"><span class="lineno">  820</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@E&quot;</span>, request.Email);</div>
<div class="line"><span class="lineno">  821</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@A&quot;</span>, request.AccountType);</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>                    <span class="keywordtype">string</span> hashedPassword = _hash.createHash(request.Password);</div>
<div class="line"><span class="lineno">  824</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@P&quot;</span>, hashedPassword);</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>                    <span class="keywordflow">if</span> (request.AccountType.Equals(<span class="stringliteral">&quot;Business&quot;</span>))</div>
<div class="line"><span class="lineno">  827</span>                    {</div>
<div class="line"><span class="lineno">  828</span>                        command.Parameters.AddWithValue(<span class="stringliteral">&quot;@K&quot;</span>, request.KvK);</div>
<div class="line"><span class="lineno">  829</span>                    }</div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  832</span>                    {</div>
<div class="line"><span class="lineno">  833</span>                        <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  834</span>                        {</div>
<div class="line"><span class="lineno">  835</span>                            <span class="keywordflow">if</span> (request.AccountType.Equals(<span class="stringliteral">&quot;Private&quot;</span>))</div>
<div class="line"><span class="lineno">  836</span>                            {</div>
<div class="line"><span class="lineno">  837</span>                                command.CommandText = <span class="stringliteral">&quot;SELECT LAST_INSERT_ID();&quot;</span>;</div>
<div class="line"><span class="lineno">  838</span>                                <span class="keywordtype">int</span> userId = Convert.ToInt32(await command.ExecuteScalarAsync());</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>                                (<span class="keywordtype">int</span> StatusCode, <span class="keywordtype">string</span> Message) response =</div>
<div class="line"><span class="lineno">  841</span>                                    await AddPrivateCustomerDetails(privateRequest, userId,</div>
<div class="line"><span class="lineno">  842</span>                                        (MySqlConnection)connection);</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>                                <span class="keywordflow">if</span> (response.StatusCode == 500 || response.StatusCode == 412)</div>
<div class="line"><span class="lineno">  845</span>                                {</div>
<div class="line"><span class="lineno">  846</span>                                    <span class="keywordtype">string</span> deleteCustomerQuery = <span class="stringliteral">&quot;DELETE FROM Customer WHERE ID = @I&quot;</span>;</div>
<div class="line"><span class="lineno">  847</span>                                    <span class="keyword">using</span> (var deleteCommand = <span class="keyword">new</span> MySqlCommand(deleteCustomerQuery,</div>
<div class="line"><span class="lineno">  848</span>                                               (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  849</span>                                    {</div>
<div class="line"><span class="lineno">  850</span>                                        deleteCommand.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, userId);</div>
<div class="line"><span class="lineno">  851</span>                                        await deleteCommand.ExecuteNonQueryAsync();</div>
<div class="line"><span class="lineno">  852</span>                                    }</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>                                    transaction.Rollback();</div>
<div class="line"><span class="lineno">  855</span>                                    <span class="keywordflow">return</span> response;</div>
<div class="line"><span class="lineno">  856</span>                                }</div>
<div class="line"><span class="lineno">  857</span>                            }</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>                            transaction.Commit();</div>
<div class="line"><span class="lineno">  860</span>                            <span class="keywordflow">return</span> (200, <span class="stringliteral">&quot;Customer Account Added Successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  861</span>                        }</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>                        <span class="keywordflow">return</span> (500, <span class="stringliteral">&quot;Unexpected Error Occurred&quot;</span>);</div>
<div class="line"><span class="lineno">  864</span>                    }</div>
<div class="line"><span class="lineno">  865</span>                    <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  866</span>                    {</div>
<div class="line"><span class="lineno">  867</span>                        Console.WriteLine(<span class="stringliteral">&quot;Error: &quot;</span> + ex.Message);</div>
<div class="line"><span class="lineno">  868</span>                        transaction.Rollback();</div>
<div class="line"><span class="lineno">  869</span>                        <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno">  870</span>                    }</div>
<div class="line"><span class="lineno">  871</span>                }</div>
<div class="line"><span class="lineno">  872</span>            }</div>
<div class="line"><span class="lineno">  873</span>            <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  874</span>            {</div>
<div class="line"><span class="lineno">  875</span>                Console.WriteLine(<span class="stringliteral">&quot;Error: &quot;</span> + ex.Message);</div>
<div class="line"><span class="lineno">  876</span>                <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno">  877</span>            }</div>
<div class="line"><span class="lineno">  878</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  879</span>            {</div>
<div class="line"><span class="lineno">  880</span>                Console.WriteLine(<span class="stringliteral">&quot;Error: &quot;</span> + ex.Message);</div>
<div class="line"><span class="lineno">  881</span>                <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno">  882</span>            }</div>
<div class="line"><span class="lineno">  883</span>        }</div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span>        <span class="keywordflow">return</span> (412, checks.Message);</div>
<div class="line"><span class="lineno">  886</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>, <a class="el" href="#l00027">_hash</a>, <a class="el" href="#l00684">AddCustomerChecks()</a>, <a class="el" href="#l00739">AddPrivateCustomerDetails()</a>, <a class="el" href="#l00037">WPR.Controllers.General.SignUp.SignUpRequestCustomer()</a> en <a class="el" href="#l00050">WPR.Controllers.General.SignUp.SignUpRequestCustomerPrivate()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a688723c1fb3385274f13ba0e3ba78da8_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a688723c1fb3385274f13ba0e3ba78da8_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a688723c1fb3385274f13ba0e3ba78da8_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a688723c1fb3385274f13ba0e3ba78da8_cgraph">
<area shape="rect" title="AddCustomer krijgt SignUpRequestCustomer binnen en SignUpRequestCustomerPrivate. Elk account heeft al..." alt="" coords="5,325,223,368"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#ae8b7a3c517ffe6cb1b85eee60e5b2292" title="AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks." alt="" coords="536,296,753,339"/>
<area shape="poly" title=" " alt="" coords="223,338,520,322,520,327,223,343"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#abf09877e4843c0b4ff2791cc32242102" title=" " alt="" coords="819,29,1036,72"/>
<area shape="poly" title=" " alt="" coords="166,322,436,213,616,145,801,81,824,74,826,79,802,87,618,150,437,218,168,327"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#ab012081435b4392bd8e6e4525e336d68" title=" " alt="" coords="819,520,1036,579"/>
<area shape="poly" title=" " alt="" coords="165,366,272,407,412,447,556,481,804,528,803,533,555,486,411,452,270,412,163,371"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a4fe2a09bb575fb8d9510828ef5ad9813" title="AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd wo..." alt="" coords="271,355,488,397"/>
<area shape="poly" title=" " alt="" coords="224,356,255,360,255,365,223,361"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a7903e03bfe7076a6ee7b352636cb854d" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="801,163,1054,205"/>
<area shape="poly" title=" " alt="" coords="672,294,729,254,800,215,817,208,819,213,802,220,732,258,675,298"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_domain_email_checker.html#af6430abcc6b17909ff568158e9e05172" title=" " alt="" coords="818,229,1037,272"/>
<area shape="poly" title=" " alt="" coords="738,293,819,273,820,279,739,298"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_birthday_checker.html#a4c7d3943364075179b3f1ca2e0f05c46" title="Check om te kijken of het een correcte verjaardag is Leeftijd mag niet onder de 18 zijn en niet boven..." alt="" coords="833,296,1022,339"/>
<area shape="poly" title=" " alt="" coords="754,315,817,315,817,320,754,320"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_email_checker.html#ab97bf7cde61a138766de208bad9d5c7c" title=" " alt="" coords="835,363,1020,405"/>
<area shape="poly" title=" " alt="" coords="739,337,820,356,819,361,738,342"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_password_checker.html#a3874adc7b516a8fb893ed18cd0a29a94" title=" " alt="" coords="828,429,1027,472"/>
<area shape="poly" title=" " alt="" coords="675,337,732,376,802,415,819,421,817,426,800,420,729,381,672,341"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_tel_checker.html#aa8036be39d90b4bd0482cc25b9bbfc5a" title=" " alt="" coords="829,96,1026,139"/>
<area shape="poly" title=" " alt="" coords="658,294,714,222,754,182,800,148,813,141,816,146,803,153,758,186,718,226,662,297"/>
<area shape="poly" title=" " alt="" coords="662,294,704,240,751,172,764,146,771,124,780,103,800,82,804,78,808,83,803,86,785,106,776,126,769,148,756,175,708,243,666,297"/>
<area shape="poly" title=" " alt="" coords="673,337,713,373,755,417,778,451,788,466,803,482,844,510,841,515,800,486,784,469,774,454,751,420,709,377,670,341"/>
<area shape="poly" title=" " alt="" coords="874,29,872,19,881,10,900,5,928,3,958,5,976,11,974,16,957,10,927,8,901,10,884,15,877,21,880,28"/>
<area shape="poly" title=" " alt="" coords="872,519,874,509,884,501,902,495,928,493,957,496,975,503,973,508,956,501,927,499,903,501,886,505,878,512,878,520"/>
<area shape="poly" title=" " alt="" coords="478,351,529,340,531,345,479,357"/>
<area shape="poly" title=" " alt="" coords="483,395,613,428,754,471,852,511,850,516,752,476,612,433,482,401"/>
</map>
</div>

</div>
</div>
<a id="a42ef5421fcb8544d4aab8ed834325a74" name="a42ef5421fcb8544d4aab8ed834325a74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ef5421fcb8544d4aab8ed834325a74">&#9670;&#160;</a></span>addCustomerAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message, int newUserID)&gt; WPR.Repository.UserRepository.addCustomerAsync </td>
          <td>(</td>
          <td class="paramtype">Object[]</td>          <td class="paramname"><span class="paramname"><em>personData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Een gebruiker (klant) wordt toegevoegd aan de database, doormiddel van alle meegegeven persoondata. Deze persoondata zal vervolgens in de query geïmplementeerd worden en vervolgens worden uitgevoerd. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">personData</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a0e52cd72018fad6b2fe68da104f5a971">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>    {</div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  162</span>        {</div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordtype">string</span> query =</div>
<div class="line"><span class="lineno">  164</span>                <span class="stringliteral">&quot;INSERT INTO Customer (Adres, Telnum, Password, Email, FirstName, LastName) values (@A, @T, @P, @E, @F, @L)&quot;</span>;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  167</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  168</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  169</span>            {</div>
<div class="line"><span class="lineno">  170</span>                <span class="comment">// Alle parameters worden ingevuld met de megegeven persoons gegevens</span></div>
<div class="line"><span class="lineno">  171</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@A&quot;</span>, personData[0]);</div>
<div class="line"><span class="lineno">  172</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@T&quot;</span>, personData[1]);</div>
<div class="line"><span class="lineno">  173</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@P&quot;</span>, personData[2]);</div>
<div class="line"><span class="lineno">  174</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@E&quot;</span>, personData[3]);</div>
<div class="line"><span class="lineno">  175</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@F&quot;</span>, personData[4]);</div>
<div class="line"><span class="lineno">  176</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@L&quot;</span>, personData[5]);</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>                <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  179</span>                {</div>
<div class="line"><span class="lineno">  180</span>                    <span class="comment">// Als de query succesvol is uitgevoerd wordt de laatste ingevoerde userId meegegeven</span></div>
<div class="line"><span class="lineno">  181</span>                    command.CommandText = <span class="stringliteral">&quot;SELECT LAST_INSERT_ID();&quot;</span>;</div>
<div class="line"><span class="lineno">  182</span>                    <span class="keywordtype">int</span> newUserID = Convert.ToInt32(await command.ExecuteScalarAsync());</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>                    <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Data Inserted&quot;</span>, newUserID);</div>
<div class="line"><span class="lineno">  185</span>                }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No Data Inserted&quot;</span>, -1);</div>
<div class="line"><span class="lineno">  188</span>            }</div>
<div class="line"><span class="lineno">  189</span>        }</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  192</span>        {</div>
<div class="line"><span class="lineno">  193</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message, -1);</div>
<div class="line"><span class="lineno">  195</span>        }</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  197</span>        {</div>
<div class="line"><span class="lineno">  198</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message, -1);</div>
<div class="line"><span class="lineno">  200</span>        }</div>
<div class="line"><span class="lineno">  201</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00619">AddPersonalCustomer()</a>.</p>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a42ef5421fcb8544d4aab8ed834325a74_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a42ef5421fcb8544d4aab8ed834325a74_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a42ef5421fcb8544d4aab8ed834325a74_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a42ef5421fcb8544d4aab8ed834325a74_icgraph">
<area shape="rect" title="Een gebruiker (klant) wordt toegevoegd aan de database, doormiddel van alle meegegeven persoondata...." alt="" coords="271,5,509,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a188ce6aab8b95ea246623cc80b520714" title=" " alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="255,29,223,29,223,24,255,24"/>
</map>
</div>

</div>
</div>
<a id="ae8b7a3c517ffe6cb1b85eee60e5b2292" name="ae8b7a3c517ffe6cb1b85eee60e5b2292"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8b7a3c517ffe6cb1b85eee60e5b2292">&#9670;&#160;</a></span>AddCustomerChecks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool Status, string Message)&gt; WPR.Repository.UserRepository.AddCustomerChecks </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>isPrivate</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SignUpRequestCustomer?</td>          <td class="paramname"><span class="paramname"><em>customer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SignUpRequestCustomerPrivate</td>          <td class="paramname"><span class="paramname"><em>detailed</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">isPrivate</td><td></td></tr>
    <tr><td class="paramname">customer</td><td></td></tr>
    <tr><td class="paramname">detailed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  686</span>    {</div>
<div class="line"><span class="lineno">  687</span>        <span class="keywordflow">if</span> (isPrivate)</div>
<div class="line"><span class="lineno">  688</span>        {</div>
<div class="line"><span class="lineno">  689</span>            <span class="keywordflow">if</span> (!BirthdayChecker.IsValidBirthday(detailed.BirthDate))</div>
<div class="line"><span class="lineno">  690</span>            {</div>
<div class="line"><span class="lineno">  691</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No Valid Birthday&quot;</span>);</div>
<div class="line"><span class="lineno">  692</span>            }</div>
<div class="line"><span class="lineno">  693</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!TelChecker.IsValidPhoneNumber(detailed.TelNumber))</div>
<div class="line"><span class="lineno">  694</span>            {</div>
<div class="line"><span class="lineno">  695</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No valid Phonenumber&quot;</span>);</div>
<div class="line"><span class="lineno">  696</span>            }</div>
<div class="line"><span class="lineno">  697</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  698</span>            {</div>
<div class="line"><span class="lineno">  699</span>                <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Valid Details&quot;</span>);</div>
<div class="line"><span class="lineno">  700</span>            }</div>
<div class="line"><span class="lineno">  701</span>        }</div>
<div class="line"><span class="lineno">  702</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  703</span>        {</div>
<div class="line"><span class="lineno">  704</span>            DomainEmailChecker domainEmailChecker = <span class="keyword">new</span> DomainEmailChecker(_connector);</div>
<div class="line"><span class="lineno">  705</span>            (<span class="keywordtype">bool</span> Found, <span class="keywordtype">int</span> KvK) checkDomain = await domainEmailChecker.<a class="code hl_function" href="class_w_p_r_1_1_utils_1_1_domain_email_checker.html#af6430abcc6b17909ff568158e9e05172">DomainExists</a>(customer.Email);</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>            <span class="keywordflow">if</span> (!checkDomain.Found)</div>
<div class="line"><span class="lineno">  708</span>            {</div>
<div class="line"><span class="lineno">  709</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Domain does not exists&quot;</span>);</div>
<div class="line"><span class="lineno">  710</span>            }</div>
<div class="line"><span class="lineno">  711</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  712</span>            {</div>
<div class="line"><span class="lineno">  713</span>                customer.KvK = checkDomain.KvK;</div>
<div class="line"><span class="lineno">  714</span>            }</div>
<div class="line"><span class="lineno">  715</span>        }</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>        var emailCheck = checkUsageEmailAsync(customer.Email);</div>
<div class="line"><span class="lineno">  718</span>        (<span class="keywordtype">bool</span> isValidPassword, <span class="keywordtype">string</span> passwordError) validPassword = PasswordChecker.IsValidPassword(customer.Password);</div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">if</span> (!EmailChecker.IsValidEmail(customer.Email))</div>
<div class="line"><span class="lineno">  720</span>        {</div>
<div class="line"><span class="lineno">  721</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No Valid Email Format&quot;</span>);</div>
<div class="line"><span class="lineno">  722</span>        }</div>
<div class="line"><span class="lineno">  723</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!validPassword.isValidPassword)</div>
<div class="line"><span class="lineno">  724</span>        {</div>
<div class="line"><span class="lineno">  725</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, validPassword.passwordError);</div>
<div class="line"><span class="lineno">  726</span>        }</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>        (<span class="keywordtype">bool</span> Status, <span class="keywordtype">string</span> Message) emailStatus = await emailCheck;</div>
<div class="line"><span class="lineno">  729</span>        <span class="keywordflow">return</span> (!emailStatus.Status, emailStatus.Message);</div>
<div class="line"><span class="lineno">  730</span>    }</div>
<div class="ttc" id="aclass_w_p_r_1_1_utils_1_1_domain_email_checker_html_af6430abcc6b17909ff568158e9e05172"><div class="ttname"><a href="class_w_p_r_1_1_utils_1_1_domain_email_checker.html#af6430abcc6b17909ff568158e9e05172">WPR.Utils.DomainEmailChecker.DomainExists</a></div><div class="ttdeci">virtual async Task&lt;(bool Found, int KvK)&gt; DomainExists(string email)</div><div class="ttdef"><b>Definitie</b> DomainEmailChecker.cs:14</div></div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>, <a class="el" href="#l00121">checkUsageEmailAsync()</a>, <a class="el" href="#l00014">WPR.Utils.DomainEmailChecker.DomainExists()</a>, <a class="el" href="#l00011">WPR.Utils.BirthdayChecker.IsValidBirthday()</a>, <a class="el" href="#l00010">WPR.Utils.EmailChecker.IsValidEmail()</a>, <a class="el" href="#l00011">WPR.Utils.PasswordChecker.IsValidPassword()</a>, <a class="el" href="#l00009">WPR.Utils.TelChecker.IsValidPhoneNumber()</a>, <a class="el" href="#l00037">WPR.Controllers.General.SignUp.SignUpRequestCustomer()</a> en <a class="el" href="#l00050">WPR.Controllers.General.SignUp.SignUpRequestCustomerPrivate()</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00796">AddCustomer()</a> en <a class="el" href="#l00739">AddPrivateCustomerDetails()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_cgraph">
<area shape="rect" title="AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks." alt="" coords="5,239,223,281"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a7903e03bfe7076a6ee7b352636cb854d" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="271,5,523,48"/>
<area shape="poly" title=" " alt="" coords="124,237,146,198,178,150,219,100,269,58,277,53,280,58,272,62,223,104,182,153,150,201,128,239"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_domain_email_checker.html#af6430abcc6b17909ff568158e9e05172" title=" " alt="" coords="287,72,506,115"/>
<area shape="poly" title=" " alt="" coords="133,236,190,180,228,150,269,124,281,119,284,123,272,129,231,154,194,184,137,240"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_birthday_checker.html#a4c7d3943364075179b3f1ca2e0f05c46" title="Check om te kijken of het een correcte verjaardag is Leeftijd mag niet onder de 18 zijn en niet boven..." alt="" coords="302,139,492,181"/>
<area shape="poly" title=" " alt="" coords="161,236,270,191,292,184,293,189,272,196,163,241"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_email_checker.html#ab97bf7cde61a138766de208bad9d5c7c" title=" " alt="" coords="304,205,490,248"/>
<area shape="poly" title=" " alt="" coords="223,245,289,237,289,242,224,250"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_password_checker.html#a3874adc7b516a8fb893ed18cd0a29a94" title=" " alt="" coords="297,272,496,315"/>
<area shape="poly" title=" " alt="" coords="224,270,282,277,282,282,223,275"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_tel_checker.html#aa8036be39d90b4bd0482cc25b9bbfc5a" title=" " alt="" coords="298,339,496,381"/>
<area shape="poly" title=" " alt="" coords="163,279,272,324,293,331,292,336,270,329,161,284"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#abf09877e4843c0b4ff2791cc32242102" title=" " alt="" coords="288,429,506,472"/>
<area shape="poly" title=" " alt="" coords="138,280,196,333,272,391,327,420,324,425,269,396,193,337,135,283"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#ab012081435b4392bd8e6e4525e336d68" title=" " alt="" coords="288,520,506,579"/>
<area shape="poly" title=" " alt="" coords="128,280,150,322,183,375,224,431,272,482,313,510,310,515,269,486,220,434,178,378,146,324,123,283"/>
<area shape="poly" title=" " alt="" coords="344,429,342,419,351,410,369,405,397,403,427,405,445,411,443,416,426,410,397,408,370,410,353,415,347,421,349,428"/>
<area shape="poly" title=" " alt="" coords="342,519,343,509,353,501,371,495,397,493,427,496,445,503,443,508,425,501,397,499,372,501,356,505,348,512,347,520"/>
</map>
</div>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_ae8b7a3c517ffe6cb1b85eee60e5b2292_icgraph">
<area shape="rect" title="AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks." alt="" coords="536,5,753,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a688723c1fb3385274f13ba0e3ba78da8" title="AddCustomer krijgt SignUpRequestCustomer binnen en SignUpRequestCustomerPrivate. Elk account heeft al..." alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="521,26,488,25,271,25,223,26,223,21,271,20,488,20,521,21"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a4fe2a09bb575fb8d9510828ef5ad9813" title="AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd wo..." alt="" coords="271,35,488,77"/>
<area shape="poly" title=" " alt="" coords="521,43,489,47,488,41,520,38"/>
<area shape="poly" title=" " alt="" coords="255,45,223,41,224,36,255,40"/>
</map>
</div>

</div>
</div>
<a id="a281b2d169ce34a240a18b3f106e2f95d" name="a281b2d169ce34a240a18b3f106e2f95d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281b2d169ce34a240a18b3f106e2f95d">&#9670;&#160;</a></span>addEmployeeCustomerAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message)&gt; WPR.Repository.UserRepository.addEmployeeCustomerAsync </td>
          <td>(</td>
          <td class="paramtype">Object[]</td>          <td class="paramname"><span class="paramname"><em>employeeData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Het aangemaakte account wordt gekoppeld aan de medewerkers tabel, doormiddel van alle meegegeven persoondata. Deze persoondata zal vervolgens in de query geïmplementeerd worden en vervolgens worden uitgevoerd. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">employeeData</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#afe0de5259233749214ee4eb6a4069e70">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  252</span>    {</div>
<div class="line"><span class="lineno">  253</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  254</span>        {</div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;INSERT INTO UserEmployee (ID, Business) values (@I, @B)&quot;</span>;</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  258</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  259</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  260</span>            {</div>
<div class="line"><span class="lineno">  261</span>                <span class="comment">// Alle parameters worden ingevuld</span></div>
<div class="line"><span class="lineno">  262</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, employeeData[0]);</div>
<div class="line"><span class="lineno">  263</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@B&quot;</span>, employeeData[1]);</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>                <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  266</span>                {</div>
<div class="line"><span class="lineno">  267</span>                    <span class="comment">// Er wordt gekeken of de gegevens zijn ingevoerd in de DataBase</span></div>
<div class="line"><span class="lineno">  268</span>                    <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Data Inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  269</span>                }</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No Data Inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  272</span>            }</div>
<div class="line"><span class="lineno">  273</span>        }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  276</span>        {</div>
<div class="line"><span class="lineno">  277</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  278</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message);</div>
<div class="line"><span class="lineno">  279</span>        }</div>
<div class="line"><span class="lineno">  280</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  281</span>        {</div>
<div class="line"><span class="lineno">  282</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message);</div>
<div class="line"><span class="lineno">  284</span>        }</div>
<div class="line"><span class="lineno">  285</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a188ce6aab8b95ea246623cc80b520714" name="a188ce6aab8b95ea246623cc80b520714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a188ce6aab8b95ea246623cc80b520714">&#9670;&#160;</a></span>AddPersonalCustomer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool Status, string Message)&gt; WPR.Repository.UserRepository.AddPersonalCustomer </td>
          <td>(</td>
          <td class="paramtype">SignUpRequest</td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#aeb4dfef402022a44079b7043d8602210">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  620</span>    {</div>
<div class="line"><span class="lineno">  621</span>        var emailCheck = checkUsageEmailAsync(request.Email);</div>
<div class="line"><span class="lineno">  622</span>        <span class="keywordtype">bool</span> validEmail = EmailChecker.IsValidEmail(request.Email);</div>
<div class="line"><span class="lineno">  623</span>        <span class="keywordtype">bool</span> validBirthday = BirthdayChecker.IsValidBirthday(request.BirthDate);</div>
<div class="line"><span class="lineno">  624</span>        <span class="keywordtype">bool</span> validPhoneNumber = TelChecker.IsValidPhoneNumber(request.TelNumber);</div>
<div class="line"><span class="lineno">  625</span>        (<span class="keywordtype">bool</span> isValidPassword, <span class="keywordtype">string</span> passwordError) validPassword = PasswordChecker.IsValidPassword(request.Password);</div>
<div class="line"><span class="lineno">  626</span>        var emailStatus = await emailCheck;</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>        Console.WriteLine(validBirthday);</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>        <span class="keywordflow">if</span> (validEmail &amp;&amp; validBirthday &amp;&amp; validPhoneNumber &amp;&amp; validPassword.isValidPassword &amp;&amp; !emailStatus.status)</div>
<div class="line"><span class="lineno">  631</span>        {</div>
<div class="line"><span class="lineno">  632</span>            var customer = await addCustomerAsync(<span class="keyword">new</span> <span class="keywordtype">object</span>[]</div>
<div class="line"><span class="lineno">  633</span>            {</div>
<div class="line"><span class="lineno">  634</span>                request.Adres,</div>
<div class="line"><span class="lineno">  635</span>                request.TelNumber,</div>
<div class="line"><span class="lineno">  636</span>                _hash.createHash(request.Password),</div>
<div class="line"><span class="lineno">  637</span>                request.Email,</div>
<div class="line"><span class="lineno">  638</span>                request.FirstName,</div>
<div class="line"><span class="lineno">  639</span>                request.LastName</div>
<div class="line"><span class="lineno">  640</span>            });</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>            <span class="keywordflow">if</span> (!customer.status)</div>
<div class="line"><span class="lineno">  643</span>            {</div>
<div class="line"><span class="lineno">  644</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, customer.message);</div>
<div class="line"><span class="lineno">  645</span>            }</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>            await addPersonalCustomerAsync(<span class="keyword">new</span> <span class="keywordtype">object</span>[]</div>
<div class="line"><span class="lineno">  648</span>            {</div>
<div class="line"><span class="lineno">  649</span>                customer.newUserID,</div>
<div class="line"><span class="lineno">  650</span>                request.BirthDate</div>
<div class="line"><span class="lineno">  651</span>            });</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>            <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Customer added&quot;</span>);</div>
<div class="line"><span class="lineno">  654</span>        }</div>
<div class="line"><span class="lineno">  655</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!validEmail)</div>
<div class="line"><span class="lineno">  656</span>        {</div>
<div class="line"><span class="lineno">  657</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Email allready in use&quot;</span>);</div>
<div class="line"><span class="lineno">  658</span>        }</div>
<div class="line"><span class="lineno">  659</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!validBirthday)</div>
<div class="line"><span class="lineno">  660</span>        {</div>
<div class="line"><span class="lineno">  661</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Invalid birthday&quot;</span>);</div>
<div class="line"><span class="lineno">  662</span>        }</div>
<div class="line"><span class="lineno">  663</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!validPassword.isValidPassword)</div>
<div class="line"><span class="lineno">  664</span>        {</div>
<div class="line"><span class="lineno">  665</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, validPassword.passwordError);</div>
<div class="line"><span class="lineno">  666</span>        }</div>
<div class="line"><span class="lineno">  667</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (emailStatus.status)</div>
<div class="line"><span class="lineno">  668</span>        {</div>
<div class="line"><span class="lineno">  669</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, emailStatus.message);</div>
<div class="line"><span class="lineno">  670</span>        }</div>
<div class="line"><span class="lineno">  671</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  672</span>        {</div>
<div class="line"><span class="lineno">  673</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;An unexpected error occured&quot;</span>);</div>
<div class="line"><span class="lineno">  674</span>        }</div>
<div class="line"><span class="lineno">  675</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00027">_hash</a>, <a class="el" href="#l00159">addCustomerAsync()</a>, <a class="el" href="#l00209">addPersonalCustomerAsync()</a>, <a class="el" href="#l00121">checkUsageEmailAsync()</a>, <a class="el" href="#l00011">WPR.Utils.BirthdayChecker.IsValidBirthday()</a>, <a class="el" href="#l00010">WPR.Utils.EmailChecker.IsValidEmail()</a>, <a class="el" href="#l00011">WPR.Utils.PasswordChecker.IsValidPassword()</a>, <a class="el" href="#l00009">WPR.Utils.TelChecker.IsValidPhoneNumber()</a> en <a class="el" href="#l00010">WPR.Controllers.General.SignUp.SignUpRequest()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a188ce6aab8b95ea246623cc80b520714_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a188ce6aab8b95ea246623cc80b520714_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a188ce6aab8b95ea246623cc80b520714_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a188ce6aab8b95ea246623cc80b520714_cgraph">
<area shape="rect" title=" " alt="" coords="5,239,223,281"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a42ef5421fcb8544d4aab8ed834325a74" title="Een gebruiker (klant) wordt toegevoegd aan de database, doormiddel van alle meegegeven persoondata...." alt="" coords="278,5,516,48"/>
<area shape="poly" title=" " alt="" coords="124,237,146,198,178,150,219,100,269,58,277,53,280,58,272,62,223,104,182,153,150,201,128,239"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a25a2f860883fcc39ea7fa8a932fde475" title="Het aangemaakte account wordt gekoppeld aan de particuliere tabel, doormiddel van alle meegegeven per..." alt="" coords="278,72,516,115"/>
<area shape="poly" title=" " alt="" coords="133,236,190,180,228,150,269,124,281,119,284,123,272,129,231,154,194,184,137,240"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a7903e03bfe7076a6ee7b352636cb854d" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="271,139,523,181"/>
<area shape="poly" title=" " alt="" coords="161,236,270,191,292,184,293,189,272,196,163,241"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_birthday_checker.html#a4c7d3943364075179b3f1ca2e0f05c46" title="Check om te kijken of het een correcte verjaardag is Leeftijd mag niet onder de 18 zijn en niet boven..." alt="" coords="302,205,492,248"/>
<area shape="poly" title=" " alt="" coords="223,245,286,237,287,242,224,250"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_email_checker.html#ab97bf7cde61a138766de208bad9d5c7c" title=" " alt="" coords="304,272,490,315"/>
<area shape="poly" title=" " alt="" coords="224,270,289,278,289,283,223,275"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_password_checker.html#a3874adc7b516a8fb893ed18cd0a29a94" title=" " alt="" coords="297,339,496,381"/>
<area shape="poly" title=" " alt="" coords="163,279,272,324,293,331,292,336,270,329,161,284"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_tel_checker.html#aa8036be39d90b4bd0482cc25b9bbfc5a" title=" " alt="" coords="298,405,496,448"/>
<area shape="poly" title=" " alt="" coords="137,280,194,336,231,366,272,391,285,397,283,402,269,396,228,370,190,340,133,284"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#a1a899a5abbcf0be4ee87632f0500c697" title="Body voor SignUpRequest." alt="" coords="310,496,484,539"/>
<area shape="poly" title=" " alt="" coords="129,280,185,364,226,414,272,458,320,487,317,491,269,462,222,417,181,368,125,283"/>
<area shape="poly" title=" " alt="" coords="344,496,342,486,351,477,369,471,397,469,427,472,445,478,443,483,426,477,397,475,370,477,353,481,347,487,349,495"/>
</map>
</div>

</div>
</div>
<a id="a25a2f860883fcc39ea7fa8a932fde475" name="a25a2f860883fcc39ea7fa8a932fde475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25a2f860883fcc39ea7fa8a932fde475">&#9670;&#160;</a></span>addPersonalCustomerAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message)&gt; WPR.Repository.UserRepository.addPersonalCustomerAsync </td>
          <td>(</td>
          <td class="paramtype">Object[]</td>          <td class="paramname"><span class="paramname"><em>personalData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Het aangemaakte account wordt gekoppeld aan de particuliere tabel, doormiddel van alle meegegeven persoondata. Deze persoondata zal vervolgens in de query geïmplementeerd worden en vervolgens worden uitgevoerd. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">personalData</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a8302234bdf3953c8329a4487c03992e8">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  210</span>    {</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  212</span>        {</div>
<div class="line"><span class="lineno">  213</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;INSERT INTO UserPersonal (ID, BirthDate) values (@I, @B)&quot;</span>;</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  216</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  217</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  218</span>            {</div>
<div class="line"><span class="lineno">  219</span>                <span class="comment">// De parameters worden ingevuld met de persoonlijke gegevens</span></div>
<div class="line"><span class="lineno">  220</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, personalData[0]);</div>
<div class="line"><span class="lineno">  221</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@B&quot;</span>, personalData[1]);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>                <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  224</span>                {</div>
<div class="line"><span class="lineno">  225</span>                    <span class="comment">// Er wordt gekeken of de gegevens zijn ingevoert in de DataBase</span></div>
<div class="line"><span class="lineno">  226</span>                    <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Data Inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  227</span>                }</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No Data Inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  230</span>            }</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  234</span>        {</div>
<div class="line"><span class="lineno">  235</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message);</div>
<div class="line"><span class="lineno">  237</span>        }</div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  239</span>        {</div>
<div class="line"><span class="lineno">  240</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message);</div>
<div class="line"><span class="lineno">  242</span>        }</div>
<div class="line"><span class="lineno">  243</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00619">AddPersonalCustomer()</a>.</p>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a25a2f860883fcc39ea7fa8a932fde475_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a25a2f860883fcc39ea7fa8a932fde475_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a25a2f860883fcc39ea7fa8a932fde475_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a25a2f860883fcc39ea7fa8a932fde475_icgraph">
<area shape="rect" title="Het aangemaakte account wordt gekoppeld aan de particuliere tabel, doormiddel van alle meegegeven per..." alt="" coords="271,5,509,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a188ce6aab8b95ea246623cc80b520714" title=" " alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="255,29,223,29,223,24,255,24"/>
</map>
</div>

</div>
</div>
<a id="a4fe2a09bb575fb8d9510828ef5ad9813" name="a4fe2a09bb575fb8d9510828ef5ad9813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fe2a09bb575fb8d9510828ef5ad9813">&#9670;&#160;</a></span>AddPrivateCustomerDetails()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(int StatusCode, string Message)&gt; WPR.Repository.UserRepository.AddPrivateCustomerDetails </td>
          <td>(</td>
          <td class="paramtype">SignUpRequestCustomerPrivate</td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>userId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MySqlConnection</td>          <td class="paramname"><span class="paramname"><em>connections</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd worden in de Private tabel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td></td></tr>
    <tr><td class="paramname">userId</td><td></td></tr>
    <tr><td class="paramname">connections</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  741</span>    {</div>
<div class="line"><span class="lineno">  742</span>        (<span class="keywordtype">bool</span> Status, <span class="keywordtype">string</span> Message) checks = await AddCustomerChecks(<span class="keyword">true</span>, <span class="keyword">null</span>, request);</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>        <span class="keywordflow">if</span> (checks.Status)</div>
<div class="line"><span class="lineno">  745</span>        {</div>
<div class="line"><span class="lineno">  746</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  747</span>            {</div>
<div class="line"><span class="lineno">  748</span>                <span class="keywordtype">string</span> query =</div>
<div class="line"><span class="lineno">  749</span>                    <span class="stringliteral">&quot;INSERT INTO Private (ID, FirstName, LastName, TelNum, Adres, BirthDate) VALUES (@I, @F, @L, @T, @A, @B)&quot;</span>;</div>
<div class="line"><span class="lineno">  750</span>                <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, connections))</div>
<div class="line"><span class="lineno">  751</span>                {</div>
<div class="line"><span class="lineno">  752</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, userId);</div>
<div class="line"><span class="lineno">  753</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@F&quot;</span>, request.FirstName);</div>
<div class="line"><span class="lineno">  754</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@L&quot;</span>, request.LastName);</div>
<div class="line"><span class="lineno">  755</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@T&quot;</span>, request.TelNumber);</div>
<div class="line"><span class="lineno">  756</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@A&quot;</span>, request.Adres);</div>
<div class="line"><span class="lineno">  757</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@B&quot;</span>, request.BirthDate);</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>                    <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  760</span>                    {</div>
<div class="line"><span class="lineno">  761</span>                        <span class="keywordflow">return</span> (200, <span class="stringliteral">&quot;Account Succesfully Added&quot;</span>);</div>
<div class="line"><span class="lineno">  762</span>                    }</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>                    <span class="keywordflow">return</span> (500, <span class="stringliteral">&quot;Unexpected Error Occured&quot;</span>);</div>
<div class="line"><span class="lineno">  765</span>                }</div>
<div class="line"><span class="lineno">  766</span>            }</div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  768</span>            {</div>
<div class="line"><span class="lineno">  769</span>                Console.WriteLine(<span class="stringliteral">&quot;Z&quot;</span>);</div>
<div class="line"><span class="lineno">  770</span>                <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno">  771</span>            }</div>
<div class="line"><span class="lineno">  772</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  773</span>            {</div>
<div class="line"><span class="lineno">  774</span>                <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno">  775</span>            }</div>
<div class="line"><span class="lineno">  776</span>        }</div>
<div class="line"><span class="lineno">  777</span> </div>
<div class="line"><span class="lineno">  778</span>        <span class="keywordflow">return</span> (412, checks.Message);</div>
<div class="line"><span class="lineno">  779</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00684">AddCustomerChecks()</a> en <a class="el" href="#l00050">WPR.Controllers.General.SignUp.SignUpRequestCustomerPrivate()</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00796">AddCustomer()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_cgraph">
<area shape="rect" title="AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd wo..." alt="" coords="5,400,223,443"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#ae8b7a3c517ffe6cb1b85eee60e5b2292" title="AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks." alt="" coords="271,272,488,315"/>
<area shape="poly" title=" " alt="" coords="159,397,318,319,321,324,161,402"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#ab012081435b4392bd8e6e4525e336d68" title=" " alt="" coords="554,520,771,579"/>
<area shape="poly" title=" " alt="" coords="209,441,539,518,538,523,208,446"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a7903e03bfe7076a6ee7b352636cb854d" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="536,5,788,48"/>
<area shape="poly" title=" " alt="" coords="386,270,406,226,438,168,481,109,506,81,534,58,541,54,544,58,538,62,510,85,485,112,442,171,411,228,391,273"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_domain_email_checker.html#af6430abcc6b17909ff568158e9e05172" title=" " alt="" coords="552,72,772,115"/>
<area shape="poly" title=" " alt="" coords="393,270,449,198,489,158,535,124,544,119,547,124,537,129,492,162,453,202,397,273"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_birthday_checker.html#a4c7d3943364075179b3f1ca2e0f05c46" title="Check om te kijken of het een correcte verjaardag is Leeftijd mag niet onder de 18 zijn en niet boven..." alt="" coords="568,139,757,181"/>
<area shape="poly" title=" " alt="" coords="407,270,464,230,535,191,552,184,554,189,537,196,467,234,410,274"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_email_checker.html#ab97bf7cde61a138766de208bad9d5c7c" title=" " alt="" coords="570,205,755,248"/>
<area shape="poly" title=" " alt="" coords="472,269,554,249,555,255,473,274"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_password_checker.html#a3874adc7b516a8fb893ed18cd0a29a94" title=" " alt="" coords="562,272,762,315"/>
<area shape="poly" title=" " alt="" coords="489,291,547,291,547,296,489,296"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_tel_checker.html#aa8036be39d90b4bd0482cc25b9bbfc5a" title=" " alt="" coords="564,339,761,381"/>
<area shape="poly" title=" " alt="" coords="473,313,555,332,553,337,472,318"/>
<area shape="rect" href="namespace_w_p_r_1_1_controllers_1_1_general_1_1_sign_up.html#abf09877e4843c0b4ff2791cc32242102" title=" " alt="" coords="554,429,771,472"/>
<area shape="poly" title=" " alt="" coords="413,313,470,351,537,391,596,420,594,425,535,396,467,355,410,317"/>
<area shape="poly" title=" " alt="" coords="400,313,476,410,538,482,580,510,577,514,534,486,472,414,396,317"/>
<area shape="poly" title=" " alt="" coords="609,429,607,419,616,410,634,405,662,403,693,405,711,411,709,416,691,410,662,408,635,410,619,415,612,421,614,428"/>
<area shape="poly" title=" " alt="" coords="607,519,608,509,618,501,636,495,662,493,692,496,710,503,708,508,691,501,662,499,637,501,621,505,613,512,612,520"/>
</map>
</div>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a4fe2a09bb575fb8d9510828ef5ad9813_icgraph">
<area shape="rect" title="AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd wo..." alt="" coords="271,5,488,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a688723c1fb3385274f13ba0e3ba78da8" title="AddCustomer krijgt SignUpRequestCustomer binnen en SignUpRequestCustomerPrivate. Elk account heeft al..." alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="255,29,223,29,223,24,255,24"/>
</map>
</div>

</div>
</div>
<a id="a09794bb8a3181b5be3f2676421dc4b12" name="a09794bb8a3181b5be3f2676421dc4b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09794bb8a3181b5be3f2676421dc4b12">&#9670;&#160;</a></span>AddStaff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message)&gt; WPR.Repository.UserRepository.AddStaff </td>
          <td>(</td>
          <td class="paramtype">Object[]</td>          <td class="paramname"><span class="paramname"><em>personData</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Er kunnen medewewerkers van Car and All toegevoegd worden aan de database, door middel van hun gegevens. De database voorziet de gegevens van een automatische id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">personData</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  549</span>    {</div>
<div class="line"><span class="lineno">  550</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  551</span>        {</div>
<div class="line"><span class="lineno">  552</span>            <span class="keywordtype">string</span> query =</div>
<div class="line"><span class="lineno">  553</span>                <span class="stringliteral">&quot;INSERT INTO STAFF (FirstName, LastName, Password, Email, Office) VALUES (@F, @L, @P, @E, @O)&quot;</span>;</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  556</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  557</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  558</span>            {</div>
<div class="line"><span class="lineno">  559</span>                <span class="comment">// Alle parameters worden ingevuld</span></div>
<div class="line"><span class="lineno">  560</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@F&quot;</span>, personData[0]);</div>
<div class="line"><span class="lineno">  561</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@L&quot;</span>, personData[1]);</div>
<div class="line"><span class="lineno">  562</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@P&quot;</span>, _hash.createHash(personData[2].ToString()));</div>
<div class="line"><span class="lineno">  563</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@E&quot;</span>, personData[3]);</div>
<div class="line"><span class="lineno">  564</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@O&quot;</span>, personData[4]);</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>                <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  567</span>                {</div>
<div class="line"><span class="lineno">  568</span>                    <span class="comment">// Er wordt gekeken of de gegevens zijn ingevoerd in de DataBase</span></div>
<div class="line"><span class="lineno">  569</span>                    <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Data inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  570</span>                }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Data not inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  573</span>            }</div>
<div class="line"><span class="lineno">  574</span>        }</div>
<div class="line"><span class="lineno">  575</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  576</span>        {</div>
<div class="line"><span class="lineno">  577</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  578</span>        }</div>
<div class="line"><span class="lineno">  579</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a> en <a class="el" href="#l00027">_hash</a>.</p>

</div>
</div>
<a id="adce1c47fd8ee12e83c5b918614e20bbc" name="adce1c47fd8ee12e83c5b918614e20bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adce1c47fd8ee12e83c5b918614e20bbc">&#9670;&#160;</a></span>ChangeBusinessData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(int StatusCode, string Message)&gt; WPR.Repository.UserRepository.ChangeBusinessData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html">ChangeBusinessInfo</a></td>          <td class="paramname"><span class="paramname"><em>businessInfo</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MySqlConnection</td>          <td class="paramname"><span class="paramname"><em>connection</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1142</span>{</div>
<div class="line"><span class="lineno"> 1143</span>    <span class="keywordtype">string</span> updateQuery = <span class="stringliteral">&quot;UPDATE Business SET BusinessName = @BusinessName, Adres = @Adres, ContactEmail = @ContactEmail, Abonnement = @Abonnement WHERE KvK = @KvK&quot;</span>;</div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>    <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(updateQuery, connection))</div>
<div class="line"><span class="lineno"> 1146</span>    {</div>
<div class="line"><span class="lineno"> 1147</span>        command.Parameters.AddWithValue(<span class="stringliteral">&quot;@KvK&quot;</span>, businessInfo.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#a5b95ff5d5f7a20e64250aafa37a3f25a">KvK</a>);</div>
<div class="line"><span class="lineno"> 1148</span>        command.Parameters.AddWithValue(<span class="stringliteral">&quot;@BusinessName&quot;</span>, businessInfo.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#a1d575389523405b3518cab33e8df7974">BusinessName</a>);</div>
<div class="line"><span class="lineno"> 1149</span>        command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Adres&quot;</span>, businessInfo.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#a4309d2da84bd138ca8d1f081297282bf">Adres</a>);</div>
<div class="line"><span class="lineno"> 1150</span>        command.Parameters.AddWithValue(<span class="stringliteral">&quot;@ContactEmail&quot;</span>, businessInfo.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#af51b29ecdfd3544451a5bf5f189cb75e">ContactEmail</a>);</div>
<div class="line"><span class="lineno"> 1151</span>        command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Abonnement&quot;</span>, businessInfo.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#ae6542edf4a88723d9ae25fe914545210">Abonnement</a>);</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1154</span>        {</div>
<div class="line"><span class="lineno"> 1155</span>            <span class="keywordtype">int</span> rowsAffected = await command.ExecuteNonQueryAsync();</div>
<div class="line"><span class="lineno"> 1156</span>            <span class="keywordflow">if</span> (rowsAffected &gt; 0)</div>
<div class="line"><span class="lineno"> 1157</span>            {</div>
<div class="line"><span class="lineno"> 1158</span>                <span class="keywordflow">return</span> (200, <span class="stringliteral">&quot;Business information updated successfully&quot;</span>);</div>
<div class="line"><span class="lineno"> 1159</span>            }</div>
<div class="line"><span class="lineno"> 1160</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1161</span>            {</div>
<div class="line"><span class="lineno"> 1162</span>                <span class="keywordflow">return</span> (404, <span class="stringliteral">&quot;Business not found with the specified KvK&quot;</span>);</div>
<div class="line"><span class="lineno"> 1163</span>            }</div>
<div class="line"><span class="lineno"> 1164</span>        }</div>
<div class="line"><span class="lineno"> 1165</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno"> 1166</span>        {</div>
<div class="line"><span class="lineno"> 1167</span>            <span class="keywordflow">return</span> (500, $<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1168</span>        }</div>
<div class="line"><span class="lineno"> 1169</span>    }</div>
<div class="line"><span class="lineno"> 1170</span>}</div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info_html_a1d575389523405b3518cab33e8df7974"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#a1d575389523405b3518cab33e8df7974">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.BusinessName</a></div><div class="ttdeci">string BusinessName</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:28</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info_html_a4309d2da84bd138ca8d1f081297282bf"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#a4309d2da84bd138ca8d1f081297282bf">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.Adres</a></div><div class="ttdeci">string Adres</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:27</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info_html_a5b95ff5d5f7a20e64250aafa37a3f25a"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#a5b95ff5d5f7a20e64250aafa37a3f25a">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.KvK</a></div><div class="ttdeci">int KvK</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:24</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info_html_ae6542edf4a88723d9ae25fe914545210"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#ae6542edf4a88723d9ae25fe914545210">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.Abonnement</a></div><div class="ttdeci">int Abonnement</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:25</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info_html_af51b29ecdfd3544451a5bf5f189cb75e"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_info.html#af51b29ecdfd3544451a5bf5f189cb75e">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.ContactEmail</a></div><div class="ttdeci">string ContactEmail</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:26</div></div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00025">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.Abonnement</a>, <a class="el" href="#l00027">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.Adres</a>, <a class="el" href="#l00028">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.BusinessName</a>, <a class="el" href="#l01054">ChangeBusinessInfo()</a>, <a class="el" href="#l00026">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.ContactEmail</a> en <a class="el" href="#l00024">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessInfo.KvK</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l01054">ChangeBusinessInfo()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,223,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a2bcea10de41cf249cee9d4049c25cc45" title=" " alt="" coords="271,5,488,48"/>
<area shape="poly" title=" " alt="" coords="223,33,255,33,255,38,223,38"/>
<area shape="poly" title=" " alt="" coords="270,20,239,20,239,15,270,15"/>
</map>
</div>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_adce1c47fd8ee12e83c5b918614e20bbc_icgraph">
<area shape="rect" title=" " alt="" coords="271,5,488,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a2bcea10de41cf249cee9d4049c25cc45" title=" " alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="255,38,223,38,223,33,255,33"/>
<area shape="poly" title=" " alt="" coords="239,15,270,15,270,20,239,20"/>
</map>
</div>

</div>
</div>
<a id="a2bcea10de41cf249cee9d4049c25cc45" name="a2bcea10de41cf249cee9d4049c25cc45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bcea10de41cf249cee9d4049c25cc45">&#9670;&#160;</a></span>ChangeBusinessInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(int StatusCode, string Message)&gt; WPR.Repository.UserRepository.ChangeBusinessInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request.html">ChangeBusinessRequest</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a254b26f8141a387db4ffa2264e5078fb">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1055</span>    {</div>
<div class="line"><span class="lineno"> 1056</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1057</span>        {</div>
<div class="line"><span class="lineno"> 1058</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT Business FROM VehicleManager WHERE ID = @I&quot;</span>;</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>            <span class="keyword">using</span> (var connection = (MySqlConnection)_connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1061</span>            <span class="keyword">using</span> (var transaction = connection.BeginTransaction())</div>
<div class="line"><span class="lineno"> 1062</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, connection))</div>
<div class="line"><span class="lineno"> 1063</span>            {</div>
<div class="line"><span class="lineno"> 1064</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request.html#abe9e3d9dd5b7ea508f66e61084437938">VehicleManagerInfo</a>?.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#aa1d62432d9112f9ba6d8cc4b9eb5073f">ID</a>);</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>                <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1067</span>                {</div>
<div class="line"><span class="lineno"> 1068</span>                    <span class="keywordflow">if</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1069</span>                    {</div>
<div class="line"><span class="lineno"> 1070</span>                        request.BusinessInfo.KvK = Convert.ToInt32(reader.GetValue(0));</div>
<div class="line"><span class="lineno"> 1071</span> </div>
<div class="line"><span class="lineno"> 1072</span>                        await reader.CloseAsync();</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>                        var changeBusiness = await ChangeBusinessData(request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request.html#aa5ca84f0a2ac6103957d53a672ad6b40">BusinessInfo</a>, connection);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>                        <span class="keywordflow">if</span> (changeBusiness.StatusCode != 200)</div>
<div class="line"><span class="lineno"> 1077</span>                        {</div>
<div class="line"><span class="lineno"> 1078</span>                            transaction.Rollback();</div>
<div class="line"><span class="lineno"> 1079</span>                            <span class="keywordflow">return</span> (changeBusiness.StatusCode, changeBusiness.Message);</div>
<div class="line"><span class="lineno"> 1080</span>                        }</div>
<div class="line"><span class="lineno"> 1081</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1082</span>                        {</div>
<div class="line"><span class="lineno"> 1083</span>                            transaction.Commit();</div>
<div class="line"><span class="lineno"> 1084</span>                            <span class="keywordflow">return</span> (200, <span class="stringliteral">&quot;Update Successful&quot;</span>);</div>
<div class="line"><span class="lineno"> 1085</span>                        }</div>
<div class="line"><span class="lineno"> 1086</span>                    }</div>
<div class="line"><span class="lineno"> 1087</span> </div>
<div class="line"><span class="lineno"> 1088</span>                    transaction.Rollback();</div>
<div class="line"><span class="lineno"> 1089</span>                    <span class="keywordflow">return</span> (404, <span class="stringliteral">&quot;VehicleManager not found or KvK is missing&quot;</span>);</div>
<div class="line"><span class="lineno"> 1090</span>                }</div>
<div class="line"><span class="lineno"> 1091</span>            }</div>
<div class="line"><span class="lineno"> 1092</span>        }</div>
<div class="line"><span class="lineno"> 1093</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno"> 1094</span>        {</div>
<div class="line"><span class="lineno"> 1095</span>            <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno"> 1096</span>        }</div>
<div class="line"><span class="lineno"> 1097</span>        <span class="keywordflow">catch</span> (OverflowException ex)</div>
<div class="line"><span class="lineno"> 1098</span>        {</div>
<div class="line"><span class="lineno"> 1099</span>            <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno"> 1100</span>        }</div>
<div class="line"><span class="lineno"> 1101</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1102</span>        {</div>
<div class="line"><span class="lineno"> 1103</span>            <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno"> 1104</span>        }</div>
<div class="line"><span class="lineno"> 1105</span>    }</div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request_html_aa5ca84f0a2ac6103957d53a672ad6b40"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request.html#aa5ca84f0a2ac6103957d53a672ad6b40">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessRequest.BusinessInfo</a></div><div class="ttdeci">ChangeBusinessInfo BusinessInfo</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:10</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request_html_abe9e3d9dd5b7ea508f66e61084437938"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_business_request.html#abe9e3d9dd5b7ea508f66e61084437938">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessRequest.VehicleManagerInfo</a></div><div class="ttdeci">ChangeVehicleManagerInfo VehicleManagerInfo</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:8</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info_html_aa1d62432d9112f9ba6d8cc4b9eb5073f"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#aa1d62432d9112f9ba6d8cc4b9eb5073f">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.ID</a></div><div class="ttdeci">int ID</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:15</div></div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>, <a class="el" href="#l00010">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessRequest.BusinessInfo</a>, <a class="el" href="#l01141">ChangeBusinessData()</a>, <a class="el" href="#l00015">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.ID</a> en <a class="el" href="#l00008">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeBusinessRequest.VehicleManagerInfo</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l01141">ChangeBusinessData()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,223,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#adce1c47fd8ee12e83c5b918614e20bbc" title=" " alt="" coords="271,5,488,48"/>
<area shape="poly" title=" " alt="" coords="223,33,255,33,255,38,223,38"/>
<area shape="poly" title=" " alt="" coords="270,20,239,20,239,15,270,15"/>
</map>
</div>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a2bcea10de41cf249cee9d4049c25cc45_icgraph">
<area shape="rect" title=" " alt="" coords="271,5,488,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#adce1c47fd8ee12e83c5b918614e20bbc" title=" " alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="255,38,223,38,223,33,255,33"/>
<area shape="poly" title=" " alt="" coords="239,15,270,15,270,20,239,20"/>
</map>
</div>

</div>
</div>
<a id="a9423f68f7d22b18441e746ba0d9ef6d6" name="a9423f68f7d22b18441e746ba0d9ef6d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9423f68f7d22b18441e746ba0d9ef6d6">&#9670;&#160;</a></span>ChangeVehicleManagerInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(int StatusCode, string Message)&gt; WPR.Repository.UserRepository.ChangeVehicleManagerInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html">ChangeVehicleManagerInfo</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#af6af9a4cee847fe4661ea81a3e59d539">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  922</span>    {</div>
<div class="line"><span class="lineno">  923</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  924</span>        {</div>
<div class="line"><span class="lineno">  925</span>            Console.WriteLine($<span class="stringliteral">&quot;Received request to update Vehicle Manager with ID: {request.ID}&quot;</span>);</div>
<div class="line"><span class="lineno">  926</span>            Console.WriteLine($<span class="stringliteral">&quot;New Email: {request.Email}&quot;</span>);</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a07928db63fc7b3f2a934ee30f8b9ddc2">Email</a>))</div>
<div class="line"><span class="lineno">  929</span>            {</div>
<div class="line"><span class="lineno">  930</span>                Console.WriteLine(<span class="stringliteral">&quot;Error: The provided email is empty.&quot;</span>);</div>
<div class="line"><span class="lineno">  931</span>                <span class="keywordflow">return</span> (400, <span class="stringliteral">&quot;Email cannot be empty.&quot;</span>);</div>
<div class="line"><span class="lineno">  932</span>            }</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>            <span class="comment">// Hash the new password (before updating)</span></div>
<div class="line"><span class="lineno">  935</span>            <span class="keywordtype">string</span> hashedPassword = _hash.createHash(request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a216a1e6dd2cb6373f1b5a31e66f0f620">Password</a>);</div>
<div class="line"><span class="lineno">  936</span>            Console.WriteLine($<span class="stringliteral">&quot;Hashed Password: {hashedPassword}&quot;</span>);</div>
<div class="line"><span class="lineno">  937</span> </div>
<div class="line"><span class="lineno">  938</span>            <span class="comment">// Validate if the new password follows the required format</span></div>
<div class="line"><span class="lineno">  939</span>            var (isValid, errorMessage) = PasswordChecker.IsValidPassword(request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a216a1e6dd2cb6373f1b5a31e66f0f620">Password</a>);</div>
<div class="line"><span class="lineno">  940</span>            <span class="keywordflow">if</span> (!isValid)</div>
<div class="line"><span class="lineno">  941</span>            {</div>
<div class="line"><span class="lineno">  942</span>                Console.WriteLine($<span class="stringliteral">&quot;Error: {errorMessage}&quot;</span>);</div>
<div class="line"><span class="lineno">  943</span>                <span class="keywordflow">return</span> (400, errorMessage);</div>
<div class="line"><span class="lineno">  944</span>            }</div>
<div class="line"><span class="lineno">  945</span> </div>
<div class="line"><span class="lineno">  946</span>            <span class="comment">// Check if the email needs to be updated (only proceed with update if the email has changed)</span></div>
<div class="line"><span class="lineno">  947</span>            <span class="keywordtype">string</span> validateQuery = <span class="stringliteral">@&quot;</span></div>
<div class="line"><span class="lineno">  948</span><span class="stringliteral">            SELECT Email FROM VehicleManager</span></div>
<div class="line"><span class="lineno">  949</span><span class="stringliteral">            WHERE ID = @ID&quot;</span>;</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  952</span>            {</div>
<div class="line"><span class="lineno">  953</span>                <span class="keywordflow">if</span> (connection == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  954</span>                {</div>
<div class="line"><span class="lineno">  955</span>                    Console.WriteLine(<span class="stringliteral">&quot;Database connection is null.&quot;</span>);</div>
<div class="line"><span class="lineno">  956</span>                    <span class="keywordflow">return</span> (500, <span class="stringliteral">&quot;Database connection failed.&quot;</span>);</div>
<div class="line"><span class="lineno">  957</span>                }</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span>                <span class="keywordflow">if</span> (connection.State != System.Data.ConnectionState.Open)</div>
<div class="line"><span class="lineno">  960</span>                {</div>
<div class="line"><span class="lineno">  961</span>                    Console.WriteLine(<span class="stringliteral">&quot;Opening database connection...&quot;</span>);</div>
<div class="line"><span class="lineno">  962</span>                    connection.Open();</div>
<div class="line"><span class="lineno">  963</span>                    Console.WriteLine(<span class="stringliteral">&quot;Connection opened successfully.&quot;</span>);</div>
<div class="line"><span class="lineno">  964</span>                }</div>
<div class="line"><span class="lineno">  965</span> </div>
<div class="line"><span class="lineno">  966</span>                <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(validateQuery, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  967</span>                {</div>
<div class="line"><span class="lineno">  968</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@ID&quot;</span>, request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#aa1d62432d9112f9ba6d8cc4b9eb5073f">ID</a>);</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>                    <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno">  971</span>                    {</div>
<div class="line"><span class="lineno">  972</span>                        <span class="keywordflow">if</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno">  973</span>                        {</div>
<div class="line"><span class="lineno">  974</span>                            <span class="keywordtype">string</span> existingEmail = reader.GetString(<span class="stringliteral">&quot;Email&quot;</span>);</div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span>                            <span class="keywordflow">if</span> (existingEmail == request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a07928db63fc7b3f2a934ee30f8b9ddc2">Email</a>)</div>
<div class="line"><span class="lineno">  977</span>                            {</div>
<div class="line"><span class="lineno">  978</span>                                <span class="comment">// If the email hasn&#39;t changed, return early with a response</span></div>
<div class="line"><span class="lineno">  979</span>                                Console.WriteLine(<span class="stringliteral">&quot;Email is the same. No update needed.&quot;</span>);</div>
<div class="line"><span class="lineno">  980</span>                                <span class="keywordflow">return</span> (200, <span class="stringliteral">&quot;No changes to the email address.&quot;</span>);</div>
<div class="line"><span class="lineno">  981</span>                            }</div>
<div class="line"><span class="lineno">  982</span>                        }</div>
<div class="line"><span class="lineno">  983</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  984</span>                        {</div>
<div class="line"><span class="lineno">  985</span>                            Console.WriteLine(<span class="stringliteral">&quot;Error: Vehicle Manager not found.&quot;</span>);</div>
<div class="line"><span class="lineno">  986</span>                            <span class="keywordflow">return</span> (404, <span class="stringliteral">&quot;Vehicle Manager not found.&quot;</span>);</div>
<div class="line"><span class="lineno">  987</span>                        }</div>
<div class="line"><span class="lineno">  988</span>                    }</div>
<div class="line"><span class="lineno">  989</span>                }</div>
<div class="line"><span class="lineno">  990</span>            }</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>            <span class="comment">// Proceed with updating the email and password (now hashed)</span></div>
<div class="line"><span class="lineno">  993</span>            <span class="keywordtype">string</span> updateQuery = <span class="stringliteral">@&quot;</span></div>
<div class="line"><span class="lineno">  994</span><span class="stringliteral">            UPDATE VehicleManager</span></div>
<div class="line"><span class="lineno">  995</span><span class="stringliteral">            SET Email = @Email,</span></div>
<div class="line"><span class="lineno">  996</span><span class="stringliteral">                Password = @Password</span></div>
<div class="line"><span class="lineno">  997</span><span class="stringliteral">            WHERE ID = @ID&quot;</span>;</div>
<div class="line"><span class="lineno">  998</span> </div>
<div class="line"><span class="lineno">  999</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1000</span>            {</div>
<div class="line"><span class="lineno"> 1001</span>                <span class="keywordflow">if</span> (connection == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1002</span>                {</div>
<div class="line"><span class="lineno"> 1003</span>                    Console.WriteLine(<span class="stringliteral">&quot;Database connection is null.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1004</span>                    <span class="keywordflow">return</span> (500, <span class="stringliteral">&quot;Database connection failed.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1005</span>                }</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>                <span class="keywordflow">if</span> (connection.State != System.Data.ConnectionState.Open)</div>
<div class="line"><span class="lineno"> 1008</span>                {</div>
<div class="line"><span class="lineno"> 1009</span>                    Console.WriteLine(<span class="stringliteral">&quot;Opening database connection...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1010</span>                    connection.Open();</div>
<div class="line"><span class="lineno"> 1011</span>                    Console.WriteLine(<span class="stringliteral">&quot;Connection opened successfully.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1012</span>                }</div>
<div class="line"><span class="lineno"> 1013</span> </div>
<div class="line"><span class="lineno"> 1014</span>                <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(updateQuery, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1015</span>                {</div>
<div class="line"><span class="lineno"> 1016</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@ID&quot;</span>, request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#aa1d62432d9112f9ba6d8cc4b9eb5073f">ID</a>);</div>
<div class="line"><span class="lineno"> 1017</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Email&quot;</span>, request.<a class="code hl_property" href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a07928db63fc7b3f2a934ee30f8b9ddc2">Email</a>);</div>
<div class="line"><span class="lineno"> 1018</span>                    command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Password&quot;</span>, hashedPassword);</div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1021</span>                    {</div>
<div class="line"><span class="lineno"> 1022</span>                        <span class="keywordtype">int</span> rowsAffected = await command.ExecuteNonQueryAsync();</div>
<div class="line"><span class="lineno"> 1023</span> </div>
<div class="line"><span class="lineno"> 1024</span>                        <span class="keywordflow">if</span> (rowsAffected &gt; 0)</div>
<div class="line"><span class="lineno"> 1025</span>                        {</div>
<div class="line"><span class="lineno"> 1026</span>                            <span class="comment">// Successfully updated the vehicle manager info</span></div>
<div class="line"><span class="lineno"> 1027</span>                            Console.WriteLine(<span class="stringliteral">&quot;Vehicle Manager updated successfully.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1028</span>                            <span class="keywordflow">return</span> (200, <span class="stringliteral">&quot;Vehicle Manager updated successfully.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1029</span>                        }</div>
<div class="line"><span class="lineno"> 1030</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1031</span>                        {</div>
<div class="line"><span class="lineno"> 1032</span>                            <span class="comment">// No rows affected, meaning no update occurred</span></div>
<div class="line"><span class="lineno"> 1033</span>                            Console.WriteLine(<span class="stringliteral">&quot;Error: Vehicle Manager not found.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1034</span>                            <span class="keywordflow">return</span> (404, <span class="stringliteral">&quot;Vehicle Manager not found.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1035</span>                        }</div>
<div class="line"><span class="lineno"> 1036</span>                    }</div>
<div class="line"><span class="lineno"> 1037</span>                    <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1038</span>                    {</div>
<div class="line"><span class="lineno"> 1039</span>                        Console.WriteLine($<span class="stringliteral">&quot;Error executing query: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1040</span>                        <span class="keywordflow">return</span> (500, $<span class="stringliteral">&quot;Error executing query: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1041</span>                    }</div>
<div class="line"><span class="lineno"> 1042</span>                }</div>
<div class="line"><span class="lineno"> 1043</span>            }</div>
<div class="line"><span class="lineno"> 1044</span>        }</div>
<div class="line"><span class="lineno"> 1045</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1046</span>        {</div>
<div class="line"><span class="lineno"> 1047</span>            Console.WriteLine($<span class="stringliteral">&quot;Error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1048</span>            <span class="keywordflow">return</span> (500, $<span class="stringliteral">&quot;Error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1049</span>        }</div>
<div class="line"><span class="lineno"> 1050</span>    }</div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info_html_a07928db63fc7b3f2a934ee30f8b9ddc2"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a07928db63fc7b3f2a934ee30f8b9ddc2">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.Email</a></div><div class="ttdeci">string Email</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:19</div></div>
<div class="ttc" id="aclass_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info_html_a216a1e6dd2cb6373f1b5a31e66f0f620"><div class="ttname"><a href="class_w_p_r_1_1_controllers_1_1_employee_1_1_vehicle_manager_1_1_change_business_settings_1_1_change_vehicle_manager_info.html#a216a1e6dd2cb6373f1b5a31e66f0f620">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.Password</a></div><div class="ttdeci">string Password</div><div class="ttdef"><b>Definitie</b> changeBusinessRequest.cs:17</div></div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>, <a class="el" href="#l00027">_hash</a>, <a class="el" href="#l00921">ChangeVehicleManagerInfo()</a>, <a class="el" href="#l00019">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.Email</a>, <a class="el" href="#l00015">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.ID</a>, <a class="el" href="#l00011">WPR.Utils.PasswordChecker.IsValidPassword()</a> en <a class="el" href="#l00017">WPR.Controllers.Employee.VehicleManager.ChangeBusinessSettings.ChangeVehicleManagerInfo.Password</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00921">ChangeVehicleManagerInfo()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,223,72"/>
<area shape="poly" title=" " alt="" coords="66,29,64,19,72,10,89,5,114,3,141,5,158,11,156,16,140,10,114,8,90,10,75,15,69,21,71,28"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_password_checker.html#a3874adc7b516a8fb893ed18cd0a29a94" title=" " alt="" coords="271,29,470,72"/>
<area shape="poly" title=" " alt="" coords="223,48,255,48,255,53,223,53"/>
</map>
</div>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a9423f68f7d22b18441e746ba0d9ef6d6_icgraph">
<area shape="rect" title=" " alt="" coords="5,29,223,72"/>
<area shape="poly" title=" " alt="" coords="149,16,136,10,114,8,94,10,81,15,76,21,78,28,73,29,71,19,78,10,92,5,114,3,137,5,151,11"/>
</map>
</div>

</div>
</div>
<a id="a7903e03bfe7076a6ee7b352636cb854d" name="a7903e03bfe7076a6ee7b352636cb854d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7903e03bfe7076a6ee7b352636cb854d">&#9670;&#160;</a></span>checkUsageEmailAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message)&gt; WPR.Repository.UserRepository.checkUsageEmailAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>email</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Er wordt gekeken of het emailadres al bestaat in de databse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">email</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a9c716662bd52a8dec74a868954dee50e">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>    {</div>
<div class="line"><span class="lineno">  123</span>        <span class="comment">// Er wordt gekeken of het emailadress al ingebruik is</span></div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT COUNT(*) FROM Customer WHERE LOWER(Email) = LOWER(@E)&quot;</span>;</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query</span></div>
<div class="line"><span class="lineno">  129</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  130</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  131</span>            {</div>
<div class="line"><span class="lineno">  132</span>                <span class="comment">// Het emailadres wordt in de query ingevuld en er wordt gekeken of er rows zijn gevonden</span></div>
<div class="line"><span class="lineno">  133</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@E&quot;</span>, email);</div>
<div class="line"><span class="lineno">  134</span>                <span class="keywordtype">bool</span> inUse = Convert.ToInt32(await command.ExecuteScalarAsync()) &gt; 0;</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>                <span class="comment">// Als het aantal gevoden rows &gt; 0, dan inUse = true, &quot;Email detected&quot; anders inUser = false, &quot;No email detected&quot;</span></div>
<div class="line"><span class="lineno">  137</span>                <span class="keywordflow">return</span> (inUse, inUse ? <span class="stringliteral">&quot;Email detected&quot;</span> : <span class="stringliteral">&quot;No email detected&quot;</span>);</div>
<div class="line"><span class="lineno">  138</span>            }</div>
<div class="line"><span class="lineno">  139</span>        }</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  142</span>        {</div>
<div class="line"><span class="lineno">  143</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message);</div>
<div class="line"><span class="lineno">  145</span>        }</div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  147</span>        {</div>
<div class="line"><span class="lineno">  148</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  149</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.Message);</div>
<div class="line"><span class="lineno">  150</span>        }</div>
<div class="line"><span class="lineno">  151</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00684">AddCustomerChecks()</a>, <a class="el" href="#l00619">AddPersonalCustomer()</a> en <a class="el" href="#l00454">CreateUserInfoQuery()</a>.</p>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_a7903e03bfe7076a6ee7b352636cb854d_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_a7903e03bfe7076a6ee7b352636cb854d_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_a7903e03bfe7076a6ee7b352636cb854d_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_a7903e03bfe7076a6ee7b352636cb854d_icgraph">
<area shape="rect" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="801,72,1054,115"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#ae8b7a3c517ffe6cb1b85eee60e5b2292" title="AddCustomerChecks kijkt of alle ingevoerde velden geldig zijn. Als een check faalt falen alle checks." alt="" coords="536,5,753,48"/>
<area shape="poly" title=" " alt="" coords="819,71,738,51,739,46,820,65"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a188ce6aab8b95ea246623cc80b520714" title=" " alt="" coords="536,72,753,115"/>
<area shape="poly" title=" " alt="" coords="786,96,754,96,754,91,786,91"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#af1ae304fd24d3ae358db293b0033e484" title="Er wordt een query aangemaakt, met daarin de meegeven gegevens die veranderd moeten worden in het acc..." alt="" coords="536,139,753,181"/>
<area shape="poly" title=" " alt="" coords="820,121,739,141,738,135,819,116"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a688723c1fb3385274f13ba0e3ba78da8" title="AddCustomer krijgt SignUpRequestCustomer binnen en SignUpRequestCustomerPrivate. Elk account heeft al..." alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="521,26,488,25,271,25,223,26,223,21,271,20,488,20,521,21"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a4fe2a09bb575fb8d9510828ef5ad9813" title="AddPrivateCustomerDetails zorgt ervoor dat alle extra details van particuliere huurders toegevoegd wo..." alt="" coords="271,35,488,77"/>
<area shape="poly" title=" " alt="" coords="521,43,489,47,488,41,520,38"/>
<area shape="poly" title=" " alt="" coords="255,45,223,41,224,36,255,40"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#af9a5424f00a5cfc023cc147a1e0a59cf" title=" " alt="" coords="271,139,488,181"/>
<area shape="poly" title=" " alt="" coords="520,163,489,163,489,157,520,157"/>
</map>
</div>

</div>
</div>
<a id="af67e3842ab505dde8a9b4986eec3d470" name="af67e3842ab505dde8a9b4986eec3d470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af67e3842ab505dde8a9b4986eec3d470">&#9670;&#160;</a></span>CreateUpdateQuery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string WPR.Repository.UserRepository.CreateUpdateQuery </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>tabel</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IList&lt; object[]&gt;</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  890</span>    {</div>
<div class="line"><span class="lineno">  891</span>        <span class="keywordtype">string</span> query = $<span class="stringliteral">&quot;UPDATE {tabel} SET&quot;</span>;</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; data.Count; i++)</div>
<div class="line"><span class="lineno">  894</span>        {</div>
<div class="line"><span class="lineno">  895</span>            <span class="keywordflow">if</span> (((<span class="keywordtype">string</span>)data[i][0]).Equals(<span class="stringliteral">&quot;Password&quot;</span>))</div>
<div class="line"><span class="lineno">  896</span>            {</div>
<div class="line"><span class="lineno">  897</span>                query += $<span class="stringliteral">&quot; Password = &#39;{_hash.createHash((string)data[i][1])}&#39;&quot;</span>;</div>
<div class="line"><span class="lineno">  898</span>            }</div>
<div class="line"><span class="lineno">  899</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data[i][2].Equals(<span class="stringliteral">&quot;System.Int32&quot;</span>))</div>
<div class="line"><span class="lineno">  900</span>            {</div>
<div class="line"><span class="lineno">  901</span>                query += $<span class="stringliteral">&quot; {data[i][0]} = {data[i][1]}&quot;</span>;</div>
<div class="line"><span class="lineno">  902</span>            }</div>
<div class="line"><span class="lineno">  903</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  904</span>            {</div>
<div class="line"><span class="lineno">  905</span>                query += $<span class="stringliteral">&quot; {data[i][0]} = &#39;{data[i][1]}&#39;&quot;</span>;</div>
<div class="line"><span class="lineno">  906</span>            }</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>            <span class="keywordflow">if</span> (i != data.Count - 1)</div>
<div class="line"><span class="lineno">  909</span>            {</div>
<div class="line"><span class="lineno">  910</span>                query += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  911</span>            }</div>
<div class="line"><span class="lineno">  912</span>        }</div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>        query += $<span class="stringliteral">&quot; WHERE {data[0][0]} = {data[0][1]}&quot;</span>;</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>        Console.WriteLine(query);</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>        <span class="keywordflow">return</span> query;</div>
<div class="line"><span class="lineno">  919</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af1ae304fd24d3ae358db293b0033e484" name="af1ae304fd24d3ae358db293b0033e484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1ae304fd24d3ae358db293b0033e484">&#9670;&#160;</a></span>CreateUserInfoQuery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool goodQuery, string message)&gt; WPR.Repository.UserRepository.CreateUserInfoQuery </td>
          <td>(</td>
          <td class="paramtype">List&lt; object[]&gt;</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Er wordt een query aangemaakt, met daarin de meegeven gegevens die veranderd moeten worden in het account van de gebruiker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  455</span>    {</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordtype">int</span> lengthList = data.Count(); <span class="comment">// De lengte voor de loopt wordt vastgesteld</span></div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;UPDATE Customer SET &quot;</span>; <span class="comment">// Het begin van de query wordt aangemaakt</span></div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; lengthList; i++)</div>
<div class="line"><span class="lineno">  460</span>        {</div>
<div class="line"><span class="lineno">  461</span>            <span class="comment">// Item[0] = Colom naam</span></div>
<div class="line"><span class="lineno">  462</span>            <span class="comment">// Item[1] = Colom data</span></div>
<div class="line"><span class="lineno">  463</span>            <span class="comment">// Item[2] = Type colom data</span></div>
<div class="line"><span class="lineno">  464</span>            <span class="keywordtype">object</span>[] item = data[i];</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>            <span class="comment">// Als de 3e item in de list een integer is, worden er geen verdere checks gedaan</span></div>
<div class="line"><span class="lineno">  467</span>            <span class="keywordflow">if</span> (item[2].Equals(<span class="stringliteral">&quot;System.Int32&quot;</span>))</div>
<div class="line"><span class="lineno">  468</span>            {</div>
<div class="line"><span class="lineno">  469</span>                query += $<span class="stringliteral">&quot;{item[0]} = {item[1]}&quot;</span>;</div>
<div class="line"><span class="lineno">  470</span>            }</div>
<div class="line"><span class="lineno">  471</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  472</span>            {</div>
<div class="line"><span class="lineno">  473</span>                <span class="comment">// Als de naam van de colomn gelijks is aan &quot;Email&quot; wordt er een email check gedaan</span></div>
<div class="line"><span class="lineno">  474</span>                <span class="keywordflow">if</span> (item[0].ToString().Equals(<span class="stringliteral">&quot;Email&quot;</span>))</div>
<div class="line"><span class="lineno">  475</span>                {</div>
<div class="line"><span class="lineno">  476</span>                    var emailCheck = await checkUsageEmailAsync(item[1].ToString());</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>                    <span class="keywordflow">if</span> (emailCheck.status)</div>
<div class="line"><span class="lineno">  479</span>                    {</div>
<div class="line"><span class="lineno">  480</span>                        <span class="keywordflow">return</span> (<span class="keyword">false</span>, emailCheck.message);</div>
<div class="line"><span class="lineno">  481</span>                    }</div>
<div class="line"><span class="lineno">  482</span>                }</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>                query += $<span class="stringliteral">&quot;{item[0]} = &#39;{item[1]}&#39;&quot;</span>;</div>
<div class="line"><span class="lineno">  485</span>            }</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">if</span> (i + 1 != lengthList)</div>
<div class="line"><span class="lineno">  488</span>            {</div>
<div class="line"><span class="lineno">  489</span>                <span class="comment">// De query kan worden uitgebreid</span></div>
<div class="line"><span class="lineno">  490</span>                query += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line"><span class="lineno">  491</span>            }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>            query += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  494</span>        }</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>        <span class="comment">// De query wordt afgesloten</span></div>
<div class="line"><span class="lineno">  497</span>        <span class="keywordflow">return</span> (<span class="keyword">true</span>, query += $<span class="stringliteral">&quot;WHERE ID = {data[0][1]}&quot;</span>);</div>
<div class="line"><span class="lineno">  498</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00121">checkUsageEmailAsync()</a>.</p>

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00344">EditUserInfoAsync()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_cgraph">
<area shape="rect" title="Er wordt een query aangemaakt, met daarin de meegeven gegevens die veranderd moeten worden in het acc..." alt="" coords="5,5,223,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a7903e03bfe7076a6ee7b352636cb854d" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="271,5,523,48"/>
<area shape="poly" title=" " alt="" coords="223,24,255,24,255,29,223,29"/>
</map>
</div>
<div class="dynheader">
Hier is de caller graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_icgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_icgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_icgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_af1ae304fd24d3ae358db293b0033e484_icgraph">
<area shape="rect" title="Er wordt een query aangemaakt, met daarin de meegeven gegevens die veranderd moeten worden in het acc..." alt="" coords="271,5,488,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#af9a5424f00a5cfc023cc147a1e0a59cf" title=" " alt="" coords="5,5,223,48"/>
<area shape="poly" title=" " alt="" coords="255,29,223,29,223,24,255,24"/>
</map>
</div>

</div>
</div>
<a id="a23bd5c36ff2c79f375a1b88727134636" name="a23bd5c36ff2c79f375a1b88727134636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23bd5c36ff2c79f375a1b88727134636">&#9670;&#160;</a></span>DeleteUserAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message)&gt; WPR.Repository.UserRepository.DeleteUserAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>userId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#ab8bc076a0fa5153144ae7a810515bf5a">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  407</span>    {</div>
<div class="line"><span class="lineno">  408</span>        Console.WriteLine(<span class="stringliteral">&quot;Deleting user&quot;</span>);</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  410</span>        {</div>
<div class="line"><span class="lineno">  411</span>            <span class="keywordtype">string</span> queryCustomer = <span class="stringliteral">&quot;DELETE FROM Customer WHERE ID = @ID&quot;</span>;</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  414</span>            <span class="keyword">using</span> (var customerCommand = <span class="keyword">new</span> MySqlCommand(queryCustomer, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  415</span>            {</div>
<div class="line"><span class="lineno">  416</span>                Console.WriteLine(userId);</div>
<div class="line"><span class="lineno">  417</span>                <span class="keywordtype">int</span> userIdInt = Convert.ToInt32(userId);</div>
<div class="line"><span class="lineno">  418</span>                Console.WriteLine(userIdInt);</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>                customerCommand.Parameters.AddWithValue(<span class="stringliteral">&quot;@ID&quot;</span>, userIdInt);</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>                <span class="keywordtype">int</span> rowsAffected = await customerCommand.ExecuteNonQueryAsync();</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>                <span class="keywordflow">if</span> (rowsAffected &gt; 0)</div>
<div class="line"><span class="lineno">  425</span>                {</div>
<div class="line"><span class="lineno">  426</span>                    <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;User deleted&quot;</span>);</div>
<div class="line"><span class="lineno">  427</span>                }</div>
<div class="line"><span class="lineno">  428</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  429</span>                {</div>
<div class="line"><span class="lineno">  430</span>                    <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;User could not be deleted&quot;</span>);</div>
<div class="line"><span class="lineno">  431</span>                }</div>
<div class="line"><span class="lineno">  432</span>            }</div>
<div class="line"><span class="lineno">  433</span>        }</div>
<div class="line"><span class="lineno">  434</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  435</span>        {</div>
<div class="line"><span class="lineno">  436</span>            <span class="comment">// Handle database errors</span></div>
<div class="line"><span class="lineno">  437</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  438</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Database error: &quot;</span> + ex.Message);</div>
<div class="line"><span class="lineno">  439</span>        }</div>
<div class="line"><span class="lineno">  440</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  441</span>        {</div>
<div class="line"><span class="lineno">  442</span>            <span class="comment">// Handle other errors</span></div>
<div class="line"><span class="lineno">  443</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  444</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Unexpected error: &quot;</span> + ex.Message);</div>
<div class="line"><span class="lineno">  445</span>        }</div>
<div class="line"><span class="lineno">  446</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="af9a5424f00a5cfc023cc147a1e0a59cf" name="af9a5424f00a5cfc023cc147a1e0a59cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a5424f00a5cfc023cc147a1e0a59cf">&#9670;&#160;</a></span>EditUserInfoAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message)&gt; WPR.Repository.UserRepository.EditUserInfoAsync </td>
          <td>(</td>
          <td class="paramtype">List&lt; object[]&gt;</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a69bf2dfc071328b914d0dd2b0e28036c">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  345</span>    {</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  347</span>        {</div>
<div class="line"><span class="lineno">  348</span>            <span class="comment">// Er wordt een custom query aangemaakt</span></div>
<div class="line"><span class="lineno">  349</span>            var query = await CreateUserInfoQuery(data);</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>            <span class="keywordflow">if</span> (query.goodQuery)</div>
<div class="line"><span class="lineno">  352</span>            {</div>
<div class="line"><span class="lineno">  353</span>                <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  354</span>                <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  355</span>                <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query.message, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  356</span>                {</div>
<div class="line"><span class="lineno">  357</span>                    var result = await command.ExecuteNonQueryAsync();</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>                    <span class="keywordflow">if</span> (await command.ExecuteNonQueryAsync() &gt; 0)</div>
<div class="line"><span class="lineno">  360</span>                    {</div>
<div class="line"><span class="lineno">  361</span>                        <span class="comment">// Er wordt gecontrolleerd of de gegeven in de DataBase zijn ingevoerd</span></div>
<div class="line"><span class="lineno">  362</span>                        <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;Data inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  363</span>                    }</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>                    <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;Data not inserted&quot;</span>);</div>
<div class="line"><span class="lineno">  366</span>                }</div>
<div class="line"><span class="lineno">  367</span>            }</div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  369</span>            {</div>
<div class="line"><span class="lineno">  370</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, query.message);</div>
<div class="line"><span class="lineno">  371</span>            }</div>
<div class="line"><span class="lineno">  372</span>        }</div>
<div class="line"><span class="lineno">  373</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  374</span>        {</div>
<div class="line"><span class="lineno">  375</span>            Console.WriteLine($<span class="stringliteral">&quot;Error: {ex}&quot;</span>);</div>
<div class="line"><span class="lineno">  376</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  377</span>        }</div>
<div class="line"><span class="lineno">  378</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a> en <a class="el" href="#l00454">CreateUserInfoQuery()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_af9a5424f00a5cfc023cc147a1e0a59cf_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_af9a5424f00a5cfc023cc147a1e0a59cf_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_af9a5424f00a5cfc023cc147a1e0a59cf_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_af9a5424f00a5cfc023cc147a1e0a59cf_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,223,48"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#af1ae304fd24d3ae358db293b0033e484" title="Er wordt een query aangemaakt, met daarin de meegeven gegevens die veranderd moeten worden in het acc..." alt="" coords="271,5,488,48"/>
<area shape="poly" title=" " alt="" coords="223,24,255,24,255,29,223,29"/>
<area shape="rect" href="class_w_p_r_1_1_repository_1_1_user_repository.html#a7903e03bfe7076a6ee7b352636cb854d" title="Er wordt gekeken of het emailadres al bestaat in de databse." alt="" coords="536,5,788,48"/>
<area shape="poly" title=" " alt="" coords="489,24,521,24,521,29,489,29"/>
</map>
</div>

</div>
</div>
<a id="a12697e6b3bceb0e47d86f05020dc8470" name="a12697e6b3bceb0e47d86f05020dc8470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12697e6b3bceb0e47d86f05020dc8470">&#9670;&#160;</a></span>GetAllSubscriptionsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; List&lt; string &gt; &gt; WPR.Repository.UserRepository.GetAllSubscriptionsAsync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#af1f89b241f484997d869c6f1fbd54bbe">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1173</span>    {</div>
<div class="line"><span class="lineno"> 1174</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1175</span>        {</div>
<div class="line"><span class="lineno"> 1176</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT Type FROM Abonnement&quot;</span>;</div>
<div class="line"><span class="lineno"> 1177</span> </div>
<div class="line"><span class="lineno"> 1178</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1179</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)_connector.CreateDbConnection()))</div>
<div class="line"><span class="lineno"> 1180</span>            <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1181</span>            {</div>
<div class="line"><span class="lineno"> 1182</span>                var subscriptions = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>                <span class="keywordflow">while</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1185</span>                {</div>
<div class="line"><span class="lineno"> 1186</span>                    subscriptions.Add((<span class="keywordtype">string</span>)reader.GetValue(0));</div>
<div class="line"><span class="lineno"> 1187</span>                }</div>
<div class="line"><span class="lineno"> 1188</span> </div>
<div class="line"><span class="lineno"> 1189</span>                <span class="keywordflow">return</span> subscriptions;</div>
<div class="line"><span class="lineno"> 1190</span>            }</div>
<div class="line"><span class="lineno"> 1191</span>        }</div>
<div class="line"><span class="lineno"> 1192</span>        <span class="keywordflow">catch</span> (MySqlException e)</div>
<div class="line"><span class="lineno"> 1193</span>        {</div>
<div class="line"><span class="lineno"> 1194</span>            Console.WriteLine(e.Message);</div>
<div class="line"><span class="lineno"> 1195</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1196</span>        }</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>        <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><span class="lineno"> 1199</span>        {</div>
<div class="line"><span class="lineno"> 1200</span>            Console.WriteLine(e);</div>
<div class="line"><span class="lineno"> 1201</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1202</span>        }</div>
<div class="line"><span class="lineno"> 1203</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="aa69e427aa0d8724ad9fca2fae1f69970" name="aa69e427aa0d8724ad9fca2fae1f69970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa69e427aa0d8724ad9fca2fae1f69970">&#9670;&#160;</a></span>GetBusinessDomainByKvK()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(int StatusCode, string Domain)&gt; WPR.Repository.UserRepository.GetBusinessDomainByKvK </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>KvK</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a891364e28a90f23735ed50cf44c76016">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1109</span>    {</div>
<div class="line"><span class="lineno"> 1110</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1111</span>        {</div>
<div class="line"><span class="lineno"> 1112</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT Domain FROM Business WHERE KvK = @KvK&quot;</span>;</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>            <span class="keyword">using</span> (var connection = (MySqlConnection)_connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1115</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, connection))</div>
<div class="line"><span class="lineno"> 1116</span>            {</div>
<div class="line"><span class="lineno"> 1117</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@KvK&quot;</span>, KvK);</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>                <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1120</span>                {</div>
<div class="line"><span class="lineno"> 1121</span>                    <span class="keywordflow">if</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1122</span>                    {</div>
<div class="line"><span class="lineno"> 1123</span>                        <span class="keywordtype">string</span> domain = reader.GetString(<span class="stringliteral">&quot;Domain&quot;</span>);</div>
<div class="line"><span class="lineno"> 1124</span>                        <span class="keywordflow">return</span> (200, domain);</div>
<div class="line"><span class="lineno"> 1125</span>                    }</div>
<div class="line"><span class="lineno"> 1126</span> </div>
<div class="line"><span class="lineno"> 1127</span>                    <span class="keywordflow">return</span> (404, <span class="stringliteral">&quot;Business with the specified KvK not found.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1128</span>                }</div>
<div class="line"><span class="lineno"> 1129</span>            }</div>
<div class="line"><span class="lineno"> 1130</span>        }</div>
<div class="line"><span class="lineno"> 1131</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno"> 1132</span>        {</div>
<div class="line"><span class="lineno"> 1133</span>            <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno"> 1134</span>        }</div>
<div class="line"><span class="lineno"> 1135</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1136</span>        {</div>
<div class="line"><span class="lineno"> 1137</span>            <span class="keywordflow">return</span> (500, ex.Message);</div>
<div class="line"><span class="lineno"> 1138</span>        }</div>
<div class="line"><span class="lineno"> 1139</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a79b888ee7712ae0374bc95a7330597e6" name="a79b888ee7712ae0374bc95a7330597e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79b888ee7712ae0374bc95a7330597e6">&#9670;&#160;</a></span>GetCustomerDetails()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; Dictionary&lt; string, object &gt; &gt; WPR.Repository.UserRepository.GetCustomerDetails </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a4054e72c9ea0d5b50c4227c38d296a6d">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1277</span>    {</div>
<div class="line"><span class="lineno"> 1278</span>        <span class="keywordtype">string</span> query = $<span class="stringliteral">&quot;SELECT * FROM Customer WHERE ID = {id}&quot;</span>;</div>
<div class="line"><span class="lineno"> 1279</span>        Dictionary&lt;string, object&gt; info = <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><span class="lineno"> 1280</span> </div>
<div class="line"><span class="lineno"> 1281</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1282</span>        {</div>
<div class="line"><span class="lineno"> 1283</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1284</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1285</span>            <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1286</span>            {</div>
<div class="line"><span class="lineno"> 1287</span>                <span class="keywordflow">while</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1288</span>                {</div>
<div class="line"><span class="lineno"> 1289</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; reader.FieldCount; i++)</div>
<div class="line"><span class="lineno"> 1290</span>                    {</div>
<div class="line"><span class="lineno"> 1291</span>                        info[reader.GetName(i)] = reader.GetValue(i);</div>
<div class="line"><span class="lineno"> 1292</span>                    }</div>
<div class="line"><span class="lineno"> 1293</span>                }</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>                <span class="keywordflow">return</span> info;</div>
<div class="line"><span class="lineno"> 1296</span>            }</div>
<div class="line"><span class="lineno"> 1297</span>        }</div>
<div class="line"><span class="lineno"> 1298</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno"> 1299</span>        {</div>
<div class="line"><span class="lineno"> 1300</span>            Console.WriteLine(ex.Message);</div>
<div class="line"><span class="lineno"> 1301</span>            <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno"> 1302</span>        }</div>
<div class="line"><span class="lineno"> 1303</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1304</span>        {</div>
<div class="line"><span class="lineno"> 1305</span>            Console.WriteLine(ex.Message);</div>
<div class="line"><span class="lineno"> 1306</span>            <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno"> 1307</span>        }</div>
<div class="line"><span class="lineno"> 1308</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a39799412586f96c48d820755a9fa1a6b" name="a39799412586f96c48d820755a9fa1a6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39799412586f96c48d820755a9fa1a6b">&#9670;&#160;</a></span>GetCustomersByBusinessNumberAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; List&lt; <a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository_1_1_customer.html">Customer</a> &gt; &gt; WPR.Repository.UserRepository.GetCustomersByBusinessNumberAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>Kvk</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a961928a8d234d5bf64c17d1ff850062c">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1344</span>    {</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1346</span>        {</div>
<div class="line"><span class="lineno"> 1347</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT ID, Email, Kvk FROM Customer WHERE Kvk = @Kvk&quot;</span>;</div>
<div class="line"><span class="lineno"> 1348</span> </div>
<div class="line"><span class="lineno"> 1349</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1350</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1351</span>            {</div>
<div class="line"><span class="lineno"> 1352</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Kvk&quot;</span>, Kvk.Trim()); <span class="comment">// Ensure no leading/trailing spaces</span></div>
<div class="line"><span class="lineno"> 1353</span> </div>
<div class="line"><span class="lineno"> 1354</span>                <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1355</span>                {</div>
<div class="line"><span class="lineno"> 1356</span>                    var customers = <span class="keyword">new</span> List&lt;Customer&gt;();</div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>                    <span class="keywordflow">while</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1359</span>                    {</div>
<div class="line"><span class="lineno"> 1360</span>                        customers.Add(<span class="keyword">new</span> Customer</div>
<div class="line"><span class="lineno"> 1361</span>                        {</div>
<div class="line"><span class="lineno"> 1362</span>                            Id = reader.GetInt32(<span class="stringliteral">&quot;ID&quot;</span>),</div>
<div class="line"><span class="lineno"> 1363</span>                            Email = reader[<span class="stringliteral">&quot;Email&quot;</span>].ToString(),</div>
<div class="line"><span class="lineno"> 1364</span>                            Kvk = reader[<span class="stringliteral">&quot;Kvk&quot;</span>].ToString()</div>
<div class="line"><span class="lineno"> 1365</span>                        });</div>
<div class="line"><span class="lineno"> 1366</span>                    }</div>
<div class="line"><span class="lineno"> 1367</span> </div>
<div class="line"><span class="lineno"> 1368</span>                    <span class="keywordflow">return</span> customers;</div>
<div class="line"><span class="lineno"> 1369</span>                }</div>
<div class="line"><span class="lineno"> 1370</span>            }</div>
<div class="line"><span class="lineno"> 1371</span>        }</div>
<div class="line"><span class="lineno"> 1372</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1373</span>        {</div>
<div class="line"><span class="lineno"> 1374</span>            Console.WriteLine($<span class="stringliteral">&quot;Error in GetCustomersByBusinessNumberAsync: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1375</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1376</span>        }</div>
<div class="line"><span class="lineno"> 1377</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="ad69d7ed5e941ab05fe1eb4ae9bb3ff1f" name="ad69d7ed5e941ab05fe1eb4ae9bb3ff1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad69d7ed5e941ab05fe1eb4ae9bb3ff1f">&#9670;&#160;</a></span>GetKindEmployeeAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;(bool status, string message, string officeType)&gt; WPR.Repository.UserRepository.GetKindEmployeeAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>userId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Er wordt door de query, doormiddel van de user id, vastgesteld tot wat voor soort office de medewerker van Car and All behoort. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a639e9a13c1b234198f293d1a9cdfac94">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  506</span>    {</div>
<div class="line"><span class="lineno">  507</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  508</span>        {</div>
<div class="line"><span class="lineno">  509</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT Office FROM Staff WHERE ID = @I&quot;</span>;</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>            <span class="comment">// Connect met de database</span></div>
<div class="line"><span class="lineno">  512</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  513</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  514</span>            {</div>
<div class="line"><span class="lineno">  515</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, userId);</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>                var result = await command.ExecuteScalarAsync();</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>                <span class="keywordflow">if</span> (result != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  520</span>                {</div>
<div class="line"><span class="lineno">  521</span>                    <span class="comment">// krijg het office type binnen</span></div>
<div class="line"><span class="lineno">  522</span>                    <span class="keywordtype">string</span> officeType = result.ToString();</div>
<div class="line"><span class="lineno">  523</span>                    <span class="keywordtype">string</span> message = $<span class="stringliteral">&quot;Employee is assigned to {officeType}&quot;</span>;</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>                    <span class="keywordflow">return</span> (<span class="keyword">true</span>, message, officeType);</div>
<div class="line"><span class="lineno">  526</span>                }</div>
<div class="line"><span class="lineno">  527</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  528</span>                {</div>
<div class="line"><span class="lineno">  529</span>                    <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;No office assigned to this employee&quot;</span>, <span class="keyword">null</span>);</div>
<div class="line"><span class="lineno">  530</span>                }</div>
<div class="line"><span class="lineno">  531</span>            }</div>
<div class="line"><span class="lineno">  532</span>        }</div>
<div class="line"><span class="lineno">  533</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  534</span>        {</div>
<div class="line"><span class="lineno">  535</span>            Console.WriteLine(ex);</div>
<div class="line"><span class="lineno">  536</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="stringliteral">&quot;An error occurred while retrieving the employee&#39;s office&quot;</span>, <span class="keyword">null</span>);</div>
<div class="line"><span class="lineno">  537</span>        }</div>
<div class="line"><span class="lineno">  538</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="ac6d8e6fb3ae175bfb90fcf19a595b01e" name="ac6d8e6fb3ae175bfb90fcf19a595b01e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d8e6fb3ae175bfb90fcf19a595b01e">&#9670;&#160;</a></span>GetSubscriptionDataAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_w_p_r_1_1_controllers_1_1customer_1_1_subscription_1_1_subscription_request.html">SubscriptionRequest</a> &gt; WPR.Repository.UserRepository.GetSubscriptionDataAsync </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a5aed8a4ff3b7137f42f366a75a1939f7">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1206</span>    {</div>
<div class="line"><span class="lineno"> 1207</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1208</span>        {</div>
<div class="line"><span class="lineno"> 1209</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT ID, Type, Description, Price FROM Abonnement WHERE ID = @Id&quot;</span>;</div>
<div class="line"><span class="lineno"> 1210</span> </div>
<div class="line"><span class="lineno"> 1211</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1212</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1213</span>            {</div>
<div class="line"><span class="lineno"> 1214</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Id&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1215</span>                <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1216</span>                {</div>
<div class="line"><span class="lineno"> 1217</span>                    <span class="keywordflow">if</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1218</span>                    {</div>
<div class="line"><span class="lineno"> 1219</span>                        var type = reader[<span class="stringliteral">&quot;Type&quot;</span>].ToString();</div>
<div class="line"><span class="lineno"> 1220</span>                        var description = reader[<span class="stringliteral">&quot;Description&quot;</span>].ToString();</div>
<div class="line"><span class="lineno"> 1221</span>                        var price = reader[<span class="stringliteral">&quot;Price&quot;</span>].ToString().Equals(<span class="stringliteral">&quot;&quot;</span>) ? 0 : Convert.ToDouble(reader[<span class="stringliteral">&quot;Price&quot;</span>]);</div>
<div class="line"><span class="lineno"> 1222</span>                        </div>
<div class="line"><span class="lineno"> 1223</span>                        <span class="keywordflow">return</span> <span class="keyword">new</span> SubscriptionRequest</div>
<div class="line"><span class="lineno"> 1224</span>                        {</div>
<div class="line"><span class="lineno"> 1225</span>                            Id = id,</div>
<div class="line"><span class="lineno"> 1226</span>                            Type = type,</div>
<div class="line"><span class="lineno"> 1227</span>                            Description = description,</div>
<div class="line"><span class="lineno"> 1228</span>                            Price = price</div>
<div class="line"><span class="lineno"> 1229</span>                        };</div>
<div class="line"><span class="lineno"> 1230</span>                    }</div>
<div class="line"><span class="lineno"> 1231</span>                }</div>
<div class="line"><span class="lineno"> 1232</span>            }</div>
<div class="line"><span class="lineno"> 1233</span> </div>
<div class="line"><span class="lineno"> 1234</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1235</span>        }</div>
<div class="line"><span class="lineno"> 1236</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1237</span>        {</div>
<div class="line"><span class="lineno"> 1238</span>            Console.WriteLine(ex.Message);</div>
<div class="line"><span class="lineno"> 1239</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1240</span>        }</div>
<div class="line"><span class="lineno"> 1241</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a877da96134a584ccc0795c7410e5532c" name="a877da96134a584ccc0795c7410e5532c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877da96134a584ccc0795c7410e5532c">&#9670;&#160;</a></span>GetSubscriptionIdsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; List&lt; int &gt; &gt; WPR.Repository.UserRepository.GetSubscriptionIdsAsync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a173b6a5127b0b845d3cfeec6b270d93a">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1246</span>    {</div>
<div class="line"><span class="lineno"> 1247</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1248</span>        {</div>
<div class="line"><span class="lineno"> 1249</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT ID FROM Abonnement&quot;</span>;</div>
<div class="line"><span class="lineno"> 1250</span> </div>
<div class="line"><span class="lineno"> 1251</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1252</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1253</span>            <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1254</span>            {</div>
<div class="line"><span class="lineno"> 1255</span>                var ids = <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><span class="lineno"> 1256</span>                <span class="keywordflow">while</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1257</span>                {</div>
<div class="line"><span class="lineno"> 1258</span>                    ids.Add(Convert.ToInt32(reader.GetValue(0)));</div>
<div class="line"><span class="lineno"> 1259</span>                }</div>
<div class="line"><span class="lineno"> 1260</span> </div>
<div class="line"><span class="lineno"> 1261</span>                <span class="keywordflow">return</span> ids;</div>
<div class="line"><span class="lineno"> 1262</span>            }</div>
<div class="line"><span class="lineno"> 1263</span>        }</div>
<div class="line"><span class="lineno"> 1264</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno"> 1265</span>        {</div>
<div class="line"><span class="lineno"> 1266</span>            Console.WriteLine(ex.Message);</div>
<div class="line"><span class="lineno"> 1267</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1268</span>        }</div>
<div class="line"><span class="lineno"> 1269</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1270</span>        {</div>
<div class="line"><span class="lineno"> 1271</span>            Console.WriteLine(ex.Message);</div>
<div class="line"><span class="lineno"> 1272</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1273</span>        }</div>
<div class="line"><span class="lineno"> 1274</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="aea5055bbf69f618cfea05d82dba1becb" name="aea5055bbf69f618cfea05d82dba1becb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5055bbf69f618cfea05d82dba1becb">&#9670;&#160;</a></span>GetUserIdAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; string &gt; WPR.Repository.UserRepository.GetUserIdAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>email</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>table</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a4c1e54015ce6e7f4e3f71a22db6c6de3">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>    {</div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  290</span>        {</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordtype">string</span> query = $<span class="stringliteral">&quot;SELECT ID FROM {table} WHERE Email = @E&quot;</span>;</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  294</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  295</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  296</span>            {</div>
<div class="line"><span class="lineno">  297</span>                <span class="comment">// De parameter wordt ingevuld</span></div>
<div class="line"><span class="lineno">  298</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@E&quot;</span>, email);</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>                var result = await command.ExecuteScalarAsync();</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>                <span class="keywordflow">if</span> (result != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  303</span>                {</div>
<div class="line"><span class="lineno">  304</span>                    <span class="comment">// De user id wordt meegegeven</span></div>
<div class="line"><span class="lineno">  305</span>                    <span class="keywordflow">return</span> result.ToString();</div>
<div class="line"><span class="lineno">  306</span>                }</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;No user found&quot;</span>;</div>
<div class="line"><span class="lineno">  309</span>            }</div>
<div class="line"><span class="lineno">  310</span>        }</div>
<div class="line"><span class="lineno">  311</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  312</span>        {</div>
<div class="line"><span class="lineno">  313</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  314</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;No user found&quot;</span>;</div>
<div class="line"><span class="lineno">  315</span>        }</div>
<div class="line"><span class="lineno">  316</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="acb618d51bcc50e8f72102e11f6bed987" name="acb618d51bcc50e8f72102e11f6bed987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb618d51bcc50e8f72102e11f6bed987">&#9670;&#160;</a></span>GetUserNameAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; string &gt; WPR.Repository.UserRepository.GetUserNameAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>userId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#adea3e199f30f2118d56fbb649c6d9b85">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  319</span>    {</div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  321</span>        {</div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT Firstname FROM Private WHERE ID = @I&quot;</span>;</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  325</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  326</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  327</span>            {</div>
<div class="line"><span class="lineno">  328</span>                <span class="comment">// De paramater wordt ingevuld</span></div>
<div class="line"><span class="lineno">  329</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@I&quot;</span>, Convert.ToInt32(userId));</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>                var result = await command.ExecuteScalarAsync();</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>                <span class="comment">// De gebruikersnaam wordt meegegeven</span></div>
<div class="line"><span class="lineno">  334</span>                <span class="keywordflow">return</span> result.ToString();</div>
<div class="line"><span class="lineno">  335</span>            }</div>
<div class="line"><span class="lineno">  336</span>        }</div>
<div class="line"><span class="lineno">  337</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  338</span>        {</div>
<div class="line"><span class="lineno">  339</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  340</span>            <span class="keywordflow">return</span> ex.ToString();</div>
<div class="line"><span class="lineno">  341</span>        }</div>
<div class="line"><span class="lineno">  342</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a0ac8b0cd38ba8f5bc6b26de77ba3faf8" name="a0ac8b0cd38ba8f5bc6b26de77ba3faf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ac8b0cd38ba8f5bc6b26de77ba3faf8">&#9670;&#160;</a></span>GetVehicleManagerInfoAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository_1_1_vehicle_manager.html">VehicleManager</a> &gt; WPR.Repository.UserRepository.GetVehicleManagerInfoAsync </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a2b8d639538bfc24ecf13e2f14a242172">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1311</span>    {</div>
<div class="line"><span class="lineno"> 1312</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1313</span>        {</div>
<div class="line"><span class="lineno"> 1314</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT ID, Email, Password, Business FROM VehicleManager WHERE ID = @Id&quot;</span>;</div>
<div class="line"><span class="lineno"> 1315</span> </div>
<div class="line"><span class="lineno"> 1316</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1317</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1318</span>            {</div>
<div class="line"><span class="lineno"> 1319</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Id&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1320</span>                <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno"> 1321</span>                {</div>
<div class="line"><span class="lineno"> 1322</span>                    <span class="keywordflow">if</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno"> 1323</span>                    {</div>
<div class="line"><span class="lineno"> 1324</span>                        <span class="keywordflow">return</span> <span class="keyword">new</span> VehicleManager</div>
<div class="line"><span class="lineno"> 1325</span>                        {</div>
<div class="line"><span class="lineno"> 1326</span>                            Id = reader.GetInt32(<span class="stringliteral">&quot;ID&quot;</span>),</div>
<div class="line"><span class="lineno"> 1327</span>                            Email = reader[<span class="stringliteral">&quot;Email&quot;</span>].ToString(),</div>
<div class="line"><span class="lineno"> 1328</span>                            Password = reader[<span class="stringliteral">&quot;Password&quot;</span>].ToString(),</div>
<div class="line"><span class="lineno"> 1329</span>                            Business = reader[<span class="stringliteral">&quot;Business&quot;</span>].ToString()</div>
<div class="line"><span class="lineno"> 1330</span>                        };</div>
<div class="line"><span class="lineno"> 1331</span>                    }</div>
<div class="line"><span class="lineno"> 1332</span>                }</div>
<div class="line"><span class="lineno"> 1333</span>            }</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1336</span>        }</div>
<div class="line"><span class="lineno"> 1337</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1338</span>        {</div>
<div class="line"><span class="lineno"> 1339</span>            Console.WriteLine(ex.Message);</div>
<div class="line"><span class="lineno"> 1340</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1341</span>        }</div>
<div class="line"><span class="lineno"> 1342</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a49c76e9c3e780a07b7036dd2a6d30263" name="a49c76e9c3e780a07b7036dd2a6d30263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49c76e9c3e780a07b7036dd2a6d30263">&#9670;&#160;</a></span>IsKvkNumberAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; WPR.Repository.UserRepository.IsKvkNumberAsync </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>kvkNumber</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a670f6c2c74f0ecdf1386af0f6069c9fd">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  381</span>    {</div>
<div class="line"><span class="lineno">  382</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  383</span>        {</div>
<div class="line"><span class="lineno">  384</span>            <span class="keywordtype">string</span> query = <span class="stringliteral">&quot;SELECT COUNT(1) FROM Business WHERE KVK = @kvkNumber&quot;</span>;</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  387</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  388</span>            {</div>
<div class="line"><span class="lineno">  389</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@kvkNumber&quot;</span>, kvkNumber);</div>
<div class="line"><span class="lineno">  390</span>                var result = Convert.ToInt32(await command.ExecuteScalarAsync());</div>
<div class="line"><span class="lineno">  391</span>                <span class="keywordflow">return</span> result &gt; 0;</div>
<div class="line"><span class="lineno">  392</span>            }</div>
<div class="line"><span class="lineno">  393</span>        }</div>
<div class="line"><span class="lineno">  394</span>        <span class="keywordflow">catch</span> (MySqlException ex)</div>
<div class="line"><span class="lineno">  395</span>        {</div>
<div class="line"><span class="lineno">  396</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Database error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  398</span>        }</div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  400</span>        {</div>
<div class="line"><span class="lineno">  401</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  402</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  403</span>        }</div>
<div class="line"><span class="lineno">  404</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="a9897bc253b72e7422cca16f676d4e53c" name="a9897bc253b72e7422cca16f676d4e53c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9897bc253b72e7422cca16f676d4e53c">&#9670;&#160;</a></span>IsUserEmployee()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; WPR.Repository.UserRepository.IsUserEmployee </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Er wordt gekeken door middel van het id of de gebruiker een geldig medewerkers id heeft. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#aab80cef291c4192ce799937ca1e08312">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  587</span>    {</div>
<div class="line"><span class="lineno">  588</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  589</span>        {</div>
<div class="line"><span class="lineno">  590</span>            <span class="keywordtype">string</span> query =</div>
<div class="line"><span class="lineno">  591</span>                <span class="stringliteral">&quot;SELECT ID FROM Customer WHERE ID = @id AND AccountType = &#39;Business&#39;&quot;</span>; <span class="comment">//Geef customer met gegeven id als hij NIET een particulier is.</span></div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>            <span class="comment">// Er wordt een connectie aangemaakt met de DataBase met bovenstaande query </span></div>
<div class="line"><span class="lineno">  595</span>            <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">  596</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">  597</span>            {</div>
<div class="line"><span class="lineno">  598</span>                <span class="comment">// De parameter wordt ingevuld</span></div>
<div class="line"><span class="lineno">  599</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@id&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>                var result = await command.ExecuteScalarAsync();</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>                <span class="keywordflow">if</span> (result != <span class="keyword">null</span> &amp;&amp; result.ToString() == <span class="keywordtype">id</span>.ToString())</div>
<div class="line"><span class="lineno">  604</span>                {</div>
<div class="line"><span class="lineno">  605</span>                    <span class="comment">// Er wordt gekeken of de gebruiker bestaat</span></div>
<div class="line"><span class="lineno">  606</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  607</span>                }</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  610</span>            }</div>
<div class="line"><span class="lineno">  611</span>        }</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  613</span>        {</div>
<div class="line"><span class="lineno">  614</span>            await Console.Error.WriteLineAsync($<span class="stringliteral">&quot;Unexpected error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  615</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  616</span>        }</div>
<div class="line"><span class="lineno">  617</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>.</p>

</div>
</div>
<a id="af7b36404dd3d6de335c9986321ead166" name="af7b36404dd3d6de335c9986321ead166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b36404dd3d6de335c9986321ead166">&#9670;&#160;</a></span>UpdateCustomerAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; WPR.Repository.UserRepository.UpdateCustomerAsync </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>email</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>password</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a8a83a6b8624335202ec9f2de84d82430">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1381</span>{</div>
<div class="line"><span class="lineno"> 1382</span>    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1383</span>    {</div>
<div class="line"><span class="lineno"> 1384</span>        Console.WriteLine($<span class="stringliteral">&quot;Received request to update Customer with ID: {id}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1385</span>        Console.WriteLine($<span class="stringliteral">&quot;New Email: {email}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1386</span> </div>
<div class="line"><span class="lineno"> 1387</span>        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt;= 0)</div>
<div class="line"><span class="lineno"> 1388</span>        {</div>
<div class="line"><span class="lineno"> 1389</span>            Console.WriteLine(<span class="stringliteral">&quot;Error: Invalid ID.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1390</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1391</span>        }</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(email) || <span class="keywordtype">string</span>.IsNullOrEmpty(password))</div>
<div class="line"><span class="lineno"> 1394</span>        {</div>
<div class="line"><span class="lineno"> 1395</span>            Console.WriteLine(<span class="stringliteral">&quot;Error: Email or Password cannot be empty.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1396</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1397</span>        }</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>        <span class="comment">// Hash the new password (before updating)</span></div>
<div class="line"><span class="lineno"> 1400</span>        <span class="keywordtype">string</span> hashedPassword = _hash.createHash(password);</div>
<div class="line"><span class="lineno"> 1401</span>        Console.WriteLine($<span class="stringliteral">&quot;Hashed Password: {hashedPassword}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span>        <span class="comment">// Validate the password format if needed (if you have a password checker class like in the previous example)</span></div>
<div class="line"><span class="lineno"> 1404</span>        var (isValid, errorMessage) = PasswordChecker.IsValidPassword(password);</div>
<div class="line"><span class="lineno"> 1405</span>        <span class="keywordflow">if</span> (!isValid)</div>
<div class="line"><span class="lineno"> 1406</span>        {</div>
<div class="line"><span class="lineno"> 1407</span>            Console.WriteLine($<span class="stringliteral">&quot;Error: {errorMessage}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1408</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1409</span>        }</div>
<div class="line"><span class="lineno"> 1410</span> </div>
<div class="line"><span class="lineno"> 1411</span>        <span class="comment">// No need to check for email change, we proceed with updating</span></div>
<div class="line"><span class="lineno"> 1412</span>        <span class="comment">// Proceed with updating the email and hashed password in the database</span></div>
<div class="line"><span class="lineno"> 1413</span>        <span class="keywordtype">string</span> updateQuery = <span class="stringliteral">&quot;UPDATE Customer SET Email = @Email, Password = @Password WHERE ID = @ID&quot;</span>;</div>
<div class="line"><span class="lineno"> 1414</span> </div>
<div class="line"><span class="lineno"> 1415</span>        <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno"> 1416</span>        {</div>
<div class="line"><span class="lineno"> 1417</span>            <span class="keywordflow">if</span> (connection == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1418</span>            {</div>
<div class="line"><span class="lineno"> 1419</span>                Console.WriteLine(<span class="stringliteral">&quot;Database connection is null.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1420</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1421</span>            }</div>
<div class="line"><span class="lineno"> 1422</span> </div>
<div class="line"><span class="lineno"> 1423</span>            <span class="keywordflow">if</span> (connection.State != System.Data.ConnectionState.Open)</div>
<div class="line"><span class="lineno"> 1424</span>            {</div>
<div class="line"><span class="lineno"> 1425</span>                Console.WriteLine(<span class="stringliteral">&quot;Opening database connection...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1426</span>                connection.Open();</div>
<div class="line"><span class="lineno"> 1427</span>                Console.WriteLine(<span class="stringliteral">&quot;Connection opened successfully.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1428</span>            }</div>
<div class="line"><span class="lineno"> 1429</span> </div>
<div class="line"><span class="lineno"> 1430</span>            <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(updateQuery, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno"> 1431</span>            {</div>
<div class="line"><span class="lineno"> 1432</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@ID&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1433</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Email&quot;</span>, email);</div>
<div class="line"><span class="lineno"> 1434</span>                command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Password&quot;</span>, hashedPassword);</div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1437</span>                {</div>
<div class="line"><span class="lineno"> 1438</span>                    <span class="keywordtype">int</span> rowsAffected = await command.ExecuteNonQueryAsync();</div>
<div class="line"><span class="lineno"> 1439</span> </div>
<div class="line"><span class="lineno"> 1440</span>                    <span class="keywordflow">if</span> (rowsAffected &gt; 0)</div>
<div class="line"><span class="lineno"> 1441</span>                    {</div>
<div class="line"><span class="lineno"> 1442</span>                        <span class="comment">// Successfully updated the customer info</span></div>
<div class="line"><span class="lineno"> 1443</span>                        Console.WriteLine(<span class="stringliteral">&quot;Customer updated successfully.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1444</span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1445</span>                    }</div>
<div class="line"><span class="lineno"> 1446</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1447</span>                    {</div>
<div class="line"><span class="lineno"> 1448</span>                        <span class="comment">// No rows affected, meaning no update occurred</span></div>
<div class="line"><span class="lineno"> 1449</span>                        Console.WriteLine(<span class="stringliteral">&quot;Error: Customer not found.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1450</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1451</span>                    }</div>
<div class="line"><span class="lineno"> 1452</span>                }</div>
<div class="line"><span class="lineno"> 1453</span>                <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1454</span>                {</div>
<div class="line"><span class="lineno"> 1455</span>                    Console.WriteLine($<span class="stringliteral">&quot;Error executing query: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1456</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1457</span>                }</div>
<div class="line"><span class="lineno"> 1458</span>            }</div>
<div class="line"><span class="lineno"> 1459</span>        }</div>
<div class="line"><span class="lineno"> 1460</span>    }</div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno"> 1462</span>    {</div>
<div class="line"><span class="lineno"> 1463</span>        Console.WriteLine($<span class="stringliteral">&quot;Error: {ex.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1464</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1465</span>    }</div>
<div class="line"><span class="lineno"> 1466</span>}</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a>, <a class="el" href="#l00027">_hash</a> en <a class="el" href="#l00011">WPR.Utils.PasswordChecker.IsValidPassword()</a>.</p>
<div class="dynheader">
Hier is de call graaf voor deze functie:</div>
<div class="dyncontent">
<div class="center"><img src="class_w_p_r_1_1_repository_1_1_user_repository_af7b36404dd3d6de335c9986321ead166_cgraph.png" border="0" usemap="#aclass_w_p_r_1_1_repository_1_1_user_repository_af7b36404dd3d6de335c9986321ead166_cgraph" alt=""/></div>
<map name="aclass_w_p_r_1_1_repository_1_1_user_repository_af7b36404dd3d6de335c9986321ead166_cgraph" id="aclass_w_p_r_1_1_repository_1_1_user_repository_af7b36404dd3d6de335c9986321ead166_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,223,48"/>
<area shape="rect" href="class_w_p_r_1_1_utils_1_1_password_checker.html#a3874adc7b516a8fb893ed18cd0a29a94" title=" " alt="" coords="271,5,470,48"/>
<area shape="poly" title=" " alt="" coords="223,24,255,24,255,29,223,29"/>
</map>
</div>

</div>
</div>
<a id="adb512c98ffbaeb97a9b9f2fdc8994549" name="adb512c98ffbaeb97a9b9f2fdc8994549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb512c98ffbaeb97a9b9f2fdc8994549">&#9670;&#160;</a></span>ValidateUserAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; WPR.Repository.UserRepository.ValidateUserAsync </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>username</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>password</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>userType</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Er wordt door middel van de meegegeven userType een query aangemaakt, om de juiste gegevens uit de juiste tabel op te halen. Vervolgens wordt er in de query het meegegeven emailadress gestopt, om zo het gehaste wachtwoord uit de database te halen Nadat er een gebruiker met wachtwoord uit de query komt, zal dit gehaste wachtwoord vergelek worden met het meegegeven gehaste wachtwoord. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td></td></tr>
    <tr><td class="paramname">password</td><td></td></tr>
    <tr><td class="paramname">userType</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retourneert</dt><dd></dd></dl>

<p>Implementeert <a class="el" href="interface_w_p_r_1_1_repository_1_1_i_user_repository.html#a7dd4b3be17516ffd565fec621cbd7452">WPR.Repository.IUserRepository</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>    {</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordtype">string</span> table;</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordtype">string</span> query;</div>
<div class="line"><span class="lineno">   75</span>        </div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">if</span> (userType.Equals(<span class="stringliteral">&quot;Employee&quot;</span>))</div>
<div class="line"><span class="lineno">   77</span>        {</div>
<div class="line"><span class="lineno">   78</span>            table = <span class="stringliteral">&quot;Staff&quot;</span>;</div>
<div class="line"><span class="lineno">   79</span>            query = <span class="stringliteral">$@&quot;SELECT password FROM {table} WHERE LOWER(email) = LOWER(@Email)&quot;</span>;</div>
<div class="line"><span class="lineno">   80</span>        }</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (userType.Equals(<span class="stringliteral">&quot;Customer&quot;</span>))</div>
<div class="line"><span class="lineno">   82</span>        {   </div>
<div class="line"><span class="lineno">   83</span>            table = <span class="stringliteral">&quot;Customer&quot;</span>;</div>
<div class="line"><span class="lineno">   84</span>            query = <span class="stringliteral">$@&quot;SELECT Password FROM {table} WHERE LOWER(email) = LOWER(@Email)&quot;</span>;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>        }</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   88</span>        {</div>
<div class="line"><span class="lineno">   89</span>            table = <span class="stringliteral">&quot;VehicleManager&quot;</span>;</div>
<div class="line"><span class="lineno">   90</span>            query = <span class="stringliteral">$@&quot;SELECT password FROM {table} WHERE LOWER(email) = LOWER(@Email)&quot;</span>;</div>
<div class="line"><span class="lineno">   91</span>        }</div>
<div class="line"><span class="lineno">   92</span>        </div>
<div class="line"><span class="lineno">   93</span>        <span class="comment">// Er wordt een connectie met de Database aangemaakt met de bovenstaande query</span></div>
<div class="line"><span class="lineno">   94</span>        <span class="keyword">using</span> (var connection = _connector.CreateDbConnection())</div>
<div class="line"><span class="lineno">   95</span>        <span class="keyword">using</span> (var command = <span class="keyword">new</span> MySqlCommand(query, (MySqlConnection)connection))</div>
<div class="line"><span class="lineno">   96</span>        {</div>
<div class="line"><span class="lineno">   97</span>            <span class="comment">// In de query wordt vastgesteld welke row er geselecteerd moet worden doormiddel van het invullen van het emailadres</span></div>
<div class="line"><span class="lineno">   98</span>            command.Parameters.AddWithValue(<span class="stringliteral">&quot;@Email&quot;</span>, username);</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>            <span class="comment">// De query wordt uitgevoerd</span></div>
<div class="line"><span class="lineno">  101</span>            <span class="keyword">using</span> (var reader = await command.ExecuteReaderAsync())</div>
<div class="line"><span class="lineno">  102</span>            {   </div>
<div class="line"><span class="lineno">  103</span>                <span class="comment">// De query wordt uitgelezen en gekeken of er rows gevonden zijn</span></div>
<div class="line"><span class="lineno">  104</span>                <span class="keywordflow">if</span> (await reader.ReadAsync())</div>
<div class="line"><span class="lineno">  105</span>                {</div>
<div class="line"><span class="lineno">  106</span>                    <span class="comment">// Het gehashte wachtwoord wordt opgehaald en wordt vergeleken met het gehaste meegegeven wachtwoord</span></div>
<div class="line"><span class="lineno">  107</span>                    <span class="keywordtype">string</span> passwordUser = reader.GetString(<span class="stringliteral">&quot;Password&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>                    <span class="keywordflow">return</span> _hash.createHash(password).Equals(passwordUser);</div>
<div class="line"><span class="lineno">  109</span>                }</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  112</span>            }</div>
<div class="line"><span class="lineno">  113</span>        }</div>
<div class="line"><span class="lineno">  114</span>    }</div>
</div><!-- fragment -->
<p class="reference">Gebruikt <a class="el" href="#l00026">_connector</a> en <a class="el" href="#l00027">_hash</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentatie van data velden</h2>
<a id="a0d5c086f43d20479ee31bed3ae96a63f" name="a0d5c086f43d20479ee31bed3ae96a63f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5c086f43d20479ee31bed3ae96a63f">&#9670;&#160;</a></span>_connector</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_w_p_r_1_1_database_1_1_i_connector.html">IConnector</a> WPR.Repository.UserRepository._connector</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00796">AddCustomer()</a>, <a class="el" href="#l00159">addCustomerAsync()</a>, <a class="el" href="#l00684">AddCustomerChecks()</a>, <a class="el" href="#l00251">addEmployeeCustomerAsync()</a>, <a class="el" href="#l00209">addPersonalCustomerAsync()</a>, <a class="el" href="#l00548">AddStaff()</a>, <a class="el" href="#l01054">ChangeBusinessInfo()</a>, <a class="el" href="#l00921">ChangeVehicleManagerInfo()</a>, <a class="el" href="#l00121">checkUsageEmailAsync()</a>, <a class="el" href="#l00406">DeleteUserAsync()</a>, <a class="el" href="#l00344">EditUserInfoAsync()</a>, <a class="el" href="#l01172">GetAllSubscriptionsAsync()</a>, <a class="el" href="#l01108">GetBusinessDomainByKvK()</a>, <a class="el" href="#l01276">GetCustomerDetails()</a>, <a class="el" href="#l01343">GetCustomersByBusinessNumberAsync()</a>, <a class="el" href="#l00505">GetKindEmployeeAsync()</a>, <a class="el" href="#l01205">GetSubscriptionDataAsync()</a>, <a class="el" href="#l01245">GetSubscriptionIdsAsync()</a>, <a class="el" href="#l00287">GetUserIdAsync()</a>, <a class="el" href="#l00318">GetUserNameAsync()</a>, <a class="el" href="#l01310">GetVehicleManagerInfoAsync()</a>, <a class="el" href="#l00380">IsKvkNumberAsync()</a>, <a class="el" href="#l00586">IsUserEmployee()</a>, <a class="el" href="#l01380">UpdateCustomerAsync()</a>, <a class="el" href="#l00030">UserRepository()</a> en <a class="el" href="#l00071">ValidateUserAsync()</a>.</p>

</div>
</div>
<a id="ac8ad4a8f0e0ab9918ee233a207c2b125" name="ac8ad4a8f0e0ab9918ee233a207c2b125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ad4a8f0e0ab9918ee233a207c2b125">&#9670;&#160;</a></span>_crypt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_w_p_r_1_1_cryption_1_1_crypt.html">Crypt</a> WPR.Repository.UserRepository._crypt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00030">UserRepository()</a>.</p>

</div>
</div>
<a id="a1b11b787b41fa41a34ef2515f5eaa6d3" name="a1b11b787b41fa41a34ef2515f5eaa6d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b11b787b41fa41a34ef2515f5eaa6d3">&#9670;&#160;</a></span>_hash</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_w_p_r_1_1_hashing_1_1_hash.html">Hash</a> WPR.Repository.UserRepository._hash</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Wordt aangeroepen door <a class="el" href="#l00796">AddCustomer()</a>, <a class="el" href="#l00619">AddPersonalCustomer()</a>, <a class="el" href="#l00548">AddStaff()</a>, <a class="el" href="#l00921">ChangeVehicleManagerInfo()</a>, <a class="el" href="#l01380">UpdateCustomerAsync()</a>, <a class="el" href="#l00030">UserRepository()</a> en <a class="el" href="#l00071">ValidateUserAsync()</a>.</p>

</div>
</div>
<hr/>De documentatie voor deze klasse is gegenereerd op basis van het volgende bestand:<ul>
<li>D:/codes/WPR/backend/src/Repository/<a class="el" href="">UserRepository.cs</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_w_p_r.html">WPR</a></li><li class="navelem"><a class="el" href="namespace_w_p_r_1_1_repository.html">Repository</a></li><li class="navelem"><a class="el" href="class_w_p_r_1_1_repository_1_1_user_repository.html">UserRepository</a></li>
    <li class="footer">Gegenereerd door <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0 </li>
  </ul>
</div>
</body>
</html>
